{"version":3,"sources":["../src/index.ts","../src/helpers/logger.ts","../src/helpers/math-diff.ts","../src/helpers/output-info.ts","../src/constants/box.ts","../src/scripts/helpers.ts","../src/helpers/utils.ts","../src/constants/path.ts","../src/scripts/cache/cache.ts","../src/scripts/path.ts","../src/constants/required.ts","../src/helpers/package.ts","../src/constants/store.ts","../src/constants/component.ts","../package.json","../src/actions/add-action.ts","../src/helpers/check.ts","../src/helpers/match.ts","../src/helpers/upgrade.ts","../src/helpers/exec.ts","../src/helpers/debug.ts","../src/helpers/detect.ts","../src/helpers/fix.ts","../src/constants/templates.ts","../src/prompts/index.ts","../src/actions/doctor-action.ts","../src/actions/env-action.ts","../src/actions/init-action.ts","../src/helpers/fetch.ts","../src/helpers/init.ts","../src/prompts/clack.ts","../src/actions/list-action.ts","../src/actions/remove-action.ts","../src/helpers/remove.ts","../src/actions/upgrade-action.ts","../src/helpers/setup.ts"],"names":["chalk","Command","_gradientString","defaultColors","gradientString","logPrefix","Logger","args","item","content","options","type","lines","i","matchTextScore","text","pattern","score","textLength","patternLength","j","findMostMatchText","list","maxScore","result","printMostMatchText","mathOption","boxRound","exec","existsSync","readFileSync","writeFileSync","retry","ora","oraPromise","fg","fileURLToPath","resolve","ROOT","resolver","path","COMPONENTS_PATH","versionModeRegex","getCommandDescAndLog","log","desc","PasCalCase","str","s","findFiles","glob","transformOption","omit","obj","keys","key","getColorVersion","currentVersion","latestVersion","transformPeerVersion","isMajorUpdate","isMinorUpdate","isPatchUpdate","currentVersionArr","latestVersionArr","getVersionAndMode","allDependencies","packageName","versionMode","getPackageManagerInfo","packageManager","version","fillAnsiLength","length","stripStr","colorMatchRegex","fillSpace","strip","mkdirSync","unlinkSync","join","PROD_DIR","PROD","CACHE_DIR","CACHE_PATH","cacheTTL","noCache","initCache","_noCache","getCacheData","data","cacheData","packageData","now","expiredDate","ttl","n","isExpired","pkgData","getPackageData","oraExecCmd","getCacheExecData","execResult","compareVersions","version1","version2","parts1","parts2","updateComponents","autoUpdateComponents","getStore","getComponents","components","error","cmd","spinner","stdout","getLatestVersion","getUnpkgUrl","url","componentsJson","downloadFile","bail","isGithubAction","getPackageInfo","packagePath","transformVersion","pkg","devDependencies","dependencies","allDependenciesKeys","currentComponents","store","component","isAllComponents","NEXT_UI","transformComponentsToPackage","transformPackageDetail","docs","description","detailPackageInfo","NEXTUI_CLI","FRAMER_MOTION","TAILWINDCSS","THEME_UI","SYSTEM_UI","DOCS_INSTALLED","DOCS_TAILWINDCSS_SETUP","DOCS_PNPM_SETUP","DOCS_PROVIDER_SETUP","tailwindRequired","isTypescript","individualTailwindRequired","isPnpm","walkDeps","walkDepComponents","outputComponents","acc","appRequired","pnpmRequired","nextUIComponent","componentPath","pnpmDir","file","getStoreSync","getNextuiComponentsData","nextUIComponents","nextUIComponentsKeys","nextUIcomponentsPackages","nextUIComponentsKeysSet","nextUIComponentsMap","nextUIComponentsPackageMap","initStoreComponentsData","orderNextUIComponentKeys","colorNextUIComponentKeys","rounded","space","padStart","padEnd","commandName","message","warnError","componentKeyLengthMap","newVersion","value","generateComponentOutputVersion","transformComponentsOutput","outputData","boxHeader","boxHeaderSec","boxHeaderTrd","boxFooter","outputInfo","outputBox","align","borderStyle","center","color","padding","title","mergedRounded","contentArr","transformArr","c","isPadding","paddingLength","mergedPadding","maxLength","cur","clearColorTitle","titleLength","titleHeaderLength","spaceLen","boxHeaderContent","spaceFir","spaceSec","padFir","padSec","boxContent","transformCur","spaceLength","pad","endLen","package_default","getMatchImport","importRegexAll","matchAll","matchImport","itemImport","importRegex","match","getMatchArray","target","mixinReg","replaceMatchArray","_replaceValue","replaceValue","v","_value","targetArray","contentIndex","moduleIndex","insertIndex","DEFAULT_SPACE","MISSING","upgrade","all","isNextUIAll","upgradeOptionList","missingDepSet","allOutputData","getAllOutputData","transformUpgradeOptionList","upgradePeerList","upgradeOption","getPackagePeerDep","missingDepList","getPackageUpgradeData","outputList","peerDepList","index","arr","outputDependencies","outputUpgradeCount","getUpgradeVersion","peer","output","optionMaxLenMap","compareLength","peerDependencies","peerPackage","peerVersion","formatPeerVersion","isLatest","componentName","outputDefault","outputPeerDepInfo","colorVersion","nextUIPeerDepList","nextUIThemePeerDepList","allOutputList","allPeerDepList","packageNameList","count","stripLatestVersion","combineProblemRecord","errorInfo","missingDependencies","tailwindName","dependency","info","checkRequiredContentInstalled","dependenciesKeys","checkPeerDependenciesConfig","packageNames","peerDependenciesList","checkPeerDependencies","hasAllComponents","hasFramerMotion","hasTailwind","hasSystemUI","hasThemeUI","config","peerData","findPeerDepIndex","peerDep","findPeerDepVersion","checkTailwind","tailwindPath","logWarning","tailwindContent","contentMatch","pluginsMatch","isDarkModeCorrect","darkMode","isContentCorrect","isPluginsCorrect","plugins","individualContent","isHaveAllContent","checkApp","appPath","appContent","isAppCorrect","checkPnpm","npmrcPath","isPnpmCorrect","checkIllegalComponents","loggerError","illegalList","matchComponent","illegalComponents","matchComponents","illegalComponent","execSync","execCache","commonExecOptions","reject","cache","logCmd","debugExecAddAction","findUp","AGENTS","LOCKS","detect","cwd","agent","lockPath","fixProvider","format","write","wrapWithNextUIProvider","returnRegex","_","p1","fixTailwind","errorInfoList","errorType","transformErrorInfo","darkModeIndex","darkModeContent","fixPnpm","runInstall","logger","APP_REPO","PAGES_REPO","VITE_REPO","APP_DIR","PAGES_DIR","VITE_DIR","APP_NAME","PAGES_NAME","VITE_NAME","tailwindTemplate","prompts","defaultPromptOptions","getAutocompleteMultiselect","choices","getSelect","getMultiselect","addAction","addApp","prettier","currentComponent","currentComponentsKeys","filterCurrentComponents","currentPkgManager","runCmd","_missingDependencies","template","isCorrectProvider","isCorrectPnpm","basename","doctorAction","_enableCheckApp","_enableCheckPnpm","_enableCheckTailwind","enableCheckApp","enableCheckPnpm","enableCheckTailwind","tailwindPaths","problemRecord","isCorrectInstalled","_isCorrectInstalled","d","isCorrectTailwind","isCorrect","problem","envAction","renameSync","p","Readable","pipeline","tar","fetchTarStream","res","downloadTemplate","root","checkInitOptions","templatesMap","_spinner","cancel","isCancel","select","cancelClack","textClack","opts","selectClack","taskClack","failText","successText","task","initAction","_projectName","_package","_template","projectName","getTableInfo","run","generateTemplate","renameTemplate","npmrcFile","originName","listAction","remote","removeDependencies","remove","removeTailwind","insIncludeAll","removeAction","filteredComponents","removeDepList","fs","setupPnpm","upgradeAction","transformComponents","nextuiData","isUpToDate","ignoreList","isExecute","install","r","ignore","packageJson","commandList","nextui","command","isArgs","matchCommand","helpInfoArr","debug","cliLatestVersion","reason"],"mappings":"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","sourcesContent":["import type {CommandName, SAFE_ANY} from '@helpers/type';\n\nimport chalk from 'chalk';\nimport {Command} from 'commander';\n\nimport {Logger, gradientString} from '@helpers/logger';\nimport {findMostMatchText} from '@helpers/math-diff';\nimport {outputBox} from '@helpers/output-info';\nimport {getCommandDescAndLog} from '@helpers/utils';\n\nimport pkg from '../package.json';\n\nimport {addAction} from './actions/add-action';\nimport {doctorAction} from './actions/doctor-action';\nimport {envAction} from './actions/env-action';\nimport {initAction} from './actions/init-action';\nimport {listAction} from './actions/list-action';\nimport {removeAction} from './actions/remove-action';\nimport {upgradeAction} from './actions/upgrade-action';\nimport {initStoreComponentsData} from './constants/component';\nimport {getStore, store} from './constants/store';\nimport {getCacheExecData, initCache} from './scripts/cache/cache';\nimport {compareVersions, getComponents} from './scripts/helpers';\n\nconst commandList: CommandName[] = ['add', 'env', 'init', 'list', 'upgrade', 'doctor', 'remove'];\n\nconst nextui = new Command();\n\nnextui\n  .name('nextui')\n  .usage('[command]')\n  .description(getCommandDescAndLog(`\\nNextUI CLI v${pkg.version}\\n`, ''))\n  .version(pkg.version, '-v, --version', 'Output the current version')\n  .helpOption('-h, --help', 'Display help for command')\n  .allowUnknownOption()\n  .option(\n    '--no-cache',\n    'Disable cache, by default data will be cached for 30m after the first request'\n  )\n  .option('-d, --debug', 'Debug mode will not install dependencies')\n  .action(async (_, command) => {\n    let isArgs = false;\n\n    if (command) {\n      const args = command.args?.[0];\n\n      if (args && !commandList.includes(args as CommandName)) {\n        isArgs = true;\n\n        const matchCommand = findMostMatchText(commandList, args);\n\n        if (matchCommand) {\n          Logger.error(\n            `Unknown command '${args}', Did you mean '${chalk.underline(matchCommand)}'?`\n          );\n        } else {\n          Logger.error(`Unknown command '${args}'`);\n        }\n      }\n    }\n\n    if (!isArgs) {\n      const helpInfo = (await getCacheExecData('nextui --help')) as string;\n\n      let helpInfoArr = helpInfo.split('\\n');\n\n      helpInfoArr = helpInfoArr.filter((info) => info && !info.includes('NextUI CLI v'));\n      // Add command name color\n      helpInfoArr = helpInfoArr.map((info) => {\n        const command = info.match(/(\\w+)\\s\\[/)?.[1];\n\n        if (command) {\n          return info.replace(command, chalk.cyan(command));\n        }\n\n        return info;\n      });\n\n      Logger.log(helpInfoArr.join('\\n'));\n    }\n    process.exit(0);\n  });\n\nnextui\n  .command('init')\n  .description('Initializes a new project')\n  .argument('[projectName]', 'Name of the project to initialize')\n  .option('-t --template [string]', 'Specify a template for the new project, e.g., app, pages')\n  .option('-p --package [string]', 'The package manager to use for the new project', 'npm')\n  .action(initAction);\n\nnextui\n  .command('add')\n  .description('Adds components to your project')\n  .argument('[components...]', 'Names of components to add')\n  .option('-a --all [boolean]', 'Add all components', false)\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-tw --tailwindPath [string]', 'Specify the path to the tailwind.config.js file')\n  .option('-app --appPath [string]', 'Specify the path to the App.tsx file')\n  .option('--prettier [boolean]', 'Apply Prettier formatting to the added content')\n  .option('--addApp [boolean]', 'Include App.tsx file content that requires a provider', false)\n  .action(addAction);\n\nnextui\n  .command('upgrade')\n  .description('Upgrades project components to the latest versions')\n  .argument('[components...]', 'Names of components to upgrade')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-a --all [boolean]', 'Upgrade all components', false)\n  .option('-w --write [boolean]', 'Write the upgrade version to package.json file', false)\n  .action(upgradeAction);\n\nnextui\n  .command('remove')\n  .description('Removes components from the project')\n  .argument('[components...]', 'Names of components to remove')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-a --all [boolean]', 'Remove all components', false)\n  .option('-tw --tailwindPath [string]', 'Specify the path to the tailwind.config.js file')\n  .option('--prettier [boolean]', 'Apply Prettier formatting to the added content')\n  .action(removeAction);\n\nnextui\n  .command('list')\n  .description('Lists all components, showing status, descriptions, and versions')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-r --remote', 'List all components available remotely')\n  .action(listAction);\nnextui\n  .command('env')\n  .description('Displays debugging information for the local environment')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .action(envAction);\n\nnextui\n  .command('doctor')\n  .description('Checks for issues in the project')\n  .option('-p --packagePath [string]', 'Specify the path to the package.json file')\n  .option('-tw --tailwindPath [string]', 'Specify the path to the tailwind.config.js file')\n  .option('-app --appPath [string]', 'Specify the path to the App.tsx file')\n  .option('-ca --checkApp [boolean]', 'Check the App.tsx file', false)\n  .option('-ct --checkTailwind [boolean]', 'Check the tailwind.config.js file', true)\n  .option('-cp --checkPnpm [boolean]', 'Check for Pnpm', true)\n  .action(doctorAction);\n\nnextui.hook('preAction', async (command) => {\n  const args = command.args?.[0];\n  const options = (command as SAFE_ANY).rawArgs.slice(2);\n  const noCache = options.includes('--no-cache');\n  const debug = options.includes('--debug') || options.includes('-d');\n\n  // Init cache\n  initCache(noCache);\n  // Init debug\n  store.debug = debug;\n\n  if (args && commandList.includes(args as CommandName)) {\n    // Before run the command init the components.json\n    const nextUIComponents = (await getComponents()).components;\n\n    initStoreComponentsData(nextUIComponents);\n  }\n\n  const cliLatestVersion = await getStore('cliLatestVersion');\n  const latestVersion = await getStore('latestVersion');\n\n  // Init latest version\n  store.latestVersion = latestVersion;\n  store.cliLatestVersion = cliLatestVersion;\n\n  // Add NextUI CLI version check preAction\n  const currentVersion = pkg.version;\n\n  if (compareVersions(currentVersion, cliLatestVersion) === -1) {\n    outputBox({\n      center: true,\n      color: 'yellow',\n      padding: 1,\n      text: `${chalk.gray(\n        `Available upgrade: v${currentVersion} -> ${chalk.greenBright(\n          `v${cliLatestVersion}`\n        )}\\nRun \\`${chalk.cyan(\n          'npm install -g nextui-cli@latest'\n        )}\\` to upgrade\\nChangelog: ${chalk.underline(\n          'https://github.com/nextui-org/nextui-cli/releases'\n        )}`\n      )}`,\n      title: gradientString('NextUI CLI')\n    });\n    Logger.newLine();\n  }\n});\n\nnextui.parseAsync(process.argv).catch(async (reason) => {\n  Logger.newLine();\n  Logger.error('Unexpected error. Please report it as a bug:');\n  Logger.log(reason);\n  Logger.newLine();\n  process.exit(1);\n});\n","/* eslint-disable no-console */\n\nimport type {SAFE_ANY} from './type';\n\nimport chalk from 'chalk';\nimport {default as _gradientString} from 'gradient-string';\n\nexport const defaultColors = ['#F54180', '#338EF7'] as const;\n\nexport const gradientString = _gradientString(...defaultColors);\n\nconst logPrefix = gradientString('NextUI CLI:');\n\nexport type PrefixLogType = Extract<\n  keyof typeof Logger,\n  'error' | 'gradient' | 'info' | 'log' | 'warn' | 'success'\n>;\nexport class Logger {\n  constructor() {}\n\n  static log(...args: Parameters<typeof console.log>) {\n    console.log(...args);\n  }\n\n  static info(...args: Parameters<typeof console.info>) {\n    console.info(...args.map((item) => chalk.blue(item)));\n  }\n\n  static success(...args: Parameters<typeof console.info>) {\n    console.info(...args.map((item) => chalk.green(item)));\n  }\n\n  static warn(...args: Parameters<typeof console.warn>) {\n    console.warn(...args.map((item) => chalk.yellow(item)));\n  }\n\n  static error(...args: Parameters<typeof console.error>) {\n    console.error(...args.map((item) => chalk.red(item)));\n  }\n\n  static grey(...args: Parameters<typeof console.log>) {\n    console.log(...args.map((item) => chalk.gray(item)));\n  }\n\n  static gradient(content: string | number | boolean, options?: {colors?: tinycolor.ColorInput[]}) {\n    this.log(_gradientString(...(options?.colors ?? defaultColors))(String(content)));\n  }\n\n  static prefix(type: PrefixLogType, ...args: SAFE_ANY) {\n    return this[type](logPrefix, ...args);\n  }\n\n  static newLine(lines?: number) {\n    if (!lines) lines = 1;\n\n    for (let i = 0; i < lines; i++) this.log();\n  }\n}\n","import {Logger} from './logger';\n\nfunction matchTextScore(text: string, pattern: string) {\n  let score = 0;\n  const textLength = text.length;\n  const patternLength = pattern.length;\n  let i = 0;\n  let j = 0;\n\n  while (i < textLength && j < patternLength) {\n    if (text[i] === pattern[j]) {\n      score++;\n      j++;\n    }\n\n    i++;\n  }\n\n  return score;\n}\n\nexport function findMostMatchText(list: string[], pattern: string) {\n  let maxScore = 0;\n  let result = '';\n\n  for (const text of list) {\n    const score = matchTextScore(text, pattern);\n\n    if (score > maxScore) {\n      maxScore = score;\n      result = text;\n    }\n  }\n\n  return result !== '' ? result : null;\n}\n\nexport function printMostMatchText(list: string[], pattern: string) {\n  const mathOption = findMostMatchText(list, pattern);\n\n  if (mathOption) {\n    Logger.error(`Unknown option '${pattern}', Did you mean '${mathOption}'?`);\n  } else {\n    Logger.error(`Unknown option '${pattern}'`);\n  }\n  process.exit(1);\n}","import type {ChalkColor, CommandName} from './type';\n\nimport chalk from 'chalk';\n\nimport {boxRound} from 'src/constants/box';\nimport {\n  type NextUIComponent,\n  type NextUIComponents,\n  colorNextUIComponentKeys,\n  orderNextUIComponentKeys\n} from 'src/constants/component';\n\nimport {Logger} from './logger';\nimport {PasCalCase, fillAnsiLength, strip} from './utils';\n\n// eslint-disable-next-line no-control-regex\nexport const colorMatchRegex = /\\u001b\\[[\\d;]+m/g;\n\nconst rounded = boxRound.round;\nconst space = '   ';\nconst padStart = `${rounded.vertical}${space}`;\nconst padEnd = `${space}${rounded.vertical}${space}`;\n\n/**\n * Output the components information e.g. status, description, version, etc.\n * @param components\n * @param commandName\n * @param warnError\n */\nexport function outputComponents({\n  commandName,\n  components,\n  message = 'Current installed components:\\n',\n  warnError = true\n}: {\n  components: NextUIComponents;\n  commandName?: CommandName;\n  warnError?: boolean;\n  message?: string;\n}) {\n  if (!components.length) {\n    if (warnError) {\n      Logger.prefix('warn', 'No components found');\n    }\n\n    return;\n  }\n\n  const componentKeyLengthMap: Record<keyof NextUIComponent | 'originVersion', number> = {\n    description: 0,\n    docs: 0,\n    name: 0,\n    originVersion: 0,\n    package: 0,\n    peerDependencies: 0,\n    status: 0,\n    style: 0,\n    version: 0\n  };\n\n  for (const component of components) {\n    for (const key in component) {\n      const str = String(component[key]);\n\n      if (key === 'version') {\n        const newVersion = str.match(/new:\\s([\\d.]+)/)?.[1];\n        const currentVersion = str.match(/([\\d.]+)\\snew:/)?.[1];\n\n        const value = strip(generateComponentOutputVersion(currentVersion!, newVersion!));\n\n        // Align the length of the version\n        componentKeyLengthMap[key] = Math.max(\n          componentKeyLengthMap[key],\n          Math.max(value.length, 'version'.length)\n        );\n        // Record origin version length\n        componentKeyLengthMap.originVersion = Math.max(\n          componentKeyLengthMap.originVersion,\n          currentVersion!.length\n        );\n\n        continue;\n      }\n\n      componentKeyLengthMap[key] = Math.max(componentKeyLengthMap[key], str.length);\n    }\n  }\n\n  let transformComponentsOutput = components.reduce((acc, component) => {\n    let outputData = padStart;\n\n    for (const key of orderNextUIComponentKeys) {\n      let value = fillAnsiLength(component[key], componentKeyLengthMap[key]);\n\n      /** ======================== Replace version to new version ======================== */\n      if (commandName !== 'list' && key === 'version') {\n        // Filter list command cause it will list all the latest components\n        const currentVersion = value.match(/([\\d.]+)\\snew:/)?.[1];\n        const newVersion = value.match(/new:\\s([\\d.]+)/)?.[1];\n\n        if (currentVersion === newVersion) {\n          value = value.replace(/\\snew:\\s[\\d.]+(\\s+)?/, '');\n          value = fillAnsiLength(\n            `${fillAnsiLength(value, componentKeyLengthMap.originVersion)} latest`,\n            componentKeyLengthMap[key]\n          );\n          value = value.replace('latest', chalk.magentaBright.underline('latest'));\n        } else if (newVersion) {\n          value = fillAnsiLength(\n            generateComponentOutputVersion(\n              fillAnsiLength(currentVersion!, componentKeyLengthMap.originVersion),\n              newVersion\n            ),\n            componentKeyLengthMap[key]\n          );\n        }\n      }\n\n      /** ======================== Change the color according to different status ======================== */\n      if (component.status === 'stable' && colorNextUIComponentKeys.includes(key)) {\n        value = chalk.greenBright(value);\n      } else if (component.status === 'new') {\n        value = chalk.magentaBright(value);\n      } else if (component.status === 'updated') {\n        value = chalk.blueBright(value);\n      }\n\n      outputData += value + padEnd;\n    }\n\n    outputData;\n\n    acc.push(outputData);\n\n    return acc;\n  }, [] as string[]);\n\n  /** ======================== Generate box header ======================== */\n  let boxHeader = rounded.topLeft + padStart.replace(/.*/g, rounded.horizontal).slice(1);\n  let boxHeaderSec = padStart;\n  let boxHeaderTrd = rounded.vertical + padStart.replace(/.*/g, rounded.horizontal).slice(1);\n\n  for (const key of orderNextUIComponentKeys) {\n    boxHeader += `${rounded.horizontal.padEnd(componentKeyLengthMap[key] + 7, rounded.horizontal)}`;\n    boxHeaderSec += chalk.redBright(PasCalCase(key).padEnd(componentKeyLengthMap[key])) + padEnd;\n    boxHeaderTrd += `${rounded.horizontal.padEnd(\n      componentKeyLengthMap[key] + 7,\n      rounded.horizontal\n    )}`;\n  }\n\n  boxHeader = boxHeader.slice(0, -2) + rounded.topRight;\n  boxHeaderTrd = boxHeaderTrd.slice(0, -2) + rounded.vertical;\n\n  /** ======================== Generate box footer ======================== */\n  let boxFooter = rounded.bottomLeft + padStart.replace(/.*/g, rounded.horizontal).slice(1);\n\n  for (const key of orderNextUIComponentKeys) {\n    boxFooter += `${rounded.horizontal.padEnd(componentKeyLengthMap[key] + 7, rounded.horizontal)}`;\n  }\n\n  boxFooter = boxFooter.slice(0, -2) + rounded.bottomRight;\n\n  transformComponentsOutput = [\n    boxHeader,\n    boxHeaderSec,\n    boxHeaderTrd,\n    ...transformComponentsOutput,\n    boxFooter\n  ];\n\n  Logger.info(message);\n\n  Logger.log(transformComponentsOutput.join('\\n'));\n}\n\n/**\n * Output the environment information e.g. OS, CPU, Node version, etc.\n */\nexport function outputInfo() {\n  Logger.newLine();\n  Logger.log(chalk.redBright('Environment Info:'));\n  Logger.log(chalk.blueBright('  System:'));\n  Logger.log(chalk.blueBright('    OS:'), process.platform);\n  Logger.log(chalk.blueBright('    CPU:'), process.arch);\n  Logger.log(chalk.greenBright('  Binaries:'));\n  Logger.log(chalk.greenBright('    Node:'), process.version);\n  Logger.newLine();\n}\n\n/**\n * Output a box with the content\n * @param text\n * @param center\n * @param log\n * @param color\n * @param title\n * @param borderStyle\n * @param padding\n * @param align\n */\nexport function outputBox({\n  align = 'center',\n  borderStyle = 'round',\n  center = false,\n  color,\n  log = true,\n  padding = 0,\n  text,\n  title\n}: {\n  text: string;\n  center?: boolean;\n  log?: boolean;\n  color?: ChalkColor;\n  title?: string;\n  borderStyle?: keyof typeof boxRound;\n  padding?: number;\n  align?: 'left' | 'center' | 'right';\n}) {\n  const rounded = boxRound[borderStyle];\n  const mergedRounded = color\n    ? Object.fromEntries(Object.entries(rounded).map(([key, value]) => [key, chalk[color](value)]))\n    : rounded;\n  const contentArr = text.split('\\n');\n  const transformArr = contentArr.map((c) => c.replace(colorMatchRegex, ''));\n\n  const isPadding = padding > 0;\n  const paddingLength = padding;\n\n  const mergedPadding = center || isPadding;\n\n  let maxLength = transformArr.reduce((acc, cur) => (cur.length > acc ? cur.length : acc), 0);\n\n  // Update the padding maxLength\n  // paddingLength * 2 because one vertical line == 4 spaces\n  maxLength = isPadding ? maxLength + paddingLength * 4 : maxLength;\n\n  const clearColorTitle = title ? title.replace(colorMatchRegex, '') : '';\n  const titleLength = title ? clearColorTitle.length : 0;\n  let titleHeaderLength = maxLength - titleLength;\n  const spaceLen = 2;\n\n  while (titleLength + spaceLen + paddingLength >= maxLength) {\n    // Need to adjust the maxLength\n    maxLength += Math.floor(titleLength / 2);\n  }\n  // Update the titleHeaderLength\n  titleHeaderLength = maxLength - titleLength;\n\n  const boxHeaderContent = (() => {\n    if (title) {\n      if (align === 'center') {\n        const spaceFir = Math.floor(titleHeaderLength / 2) - 1;\n        const spaceSec = Math.ceil(titleHeaderLength / 2) - 1;\n\n        const padFir = spaceFir > 0 ? mergedRounded.horizontal.repeat(spaceFir) : '';\n        const padSec = spaceSec > 0 ? mergedRounded.horizontal.repeat(spaceSec) : '';\n\n        return `${padFir} ${title} ${padSec}`;\n      } else if (align === 'left') {\n        return ` ${title} ${mergedRounded.horizontal.repeat(titleHeaderLength - 2)}`;\n      } else {\n        return `${mergedRounded.horizontal.repeat(titleHeaderLength - 2)} ${title} `;\n      }\n    }\n\n    return mergedRounded.horizontal.repeat(maxLength);\n  })();\n\n  const boxHeader = mergedRounded.topLeft + boxHeaderContent + mergedRounded.topRight;\n  const boxFooter =\n    mergedRounded.bottomLeft +\n    mergedRounded.horizontal.repeat(maxLength) +\n    mergedRounded.bottomRight;\n\n  let boxContent = contentArr.reduce((acc, cur) => {\n    const transformCur = cur.replace(colorMatchRegex, '');\n    const spaceLength = maxLength - transformCur.length;\n\n    const pad = ' '.repeat(spaceLength);\n\n    const spaceFir = Math.floor(spaceLength / 2);\n    const spaceSec = Math.ceil(spaceLength / 2);\n\n    const padFir = spaceFir > 0 ? ' '.repeat(spaceFir) : '';\n    const padSec = spaceSec > 0 ? ' '.repeat(spaceSec) : '';\n\n    // Over 2 cause one vertical line == 2 spaces\n    // paddingLength = Math.floor(Math.max(paddingLength, spaceFir, spaceSec) / 2);\n\n    if (center) {\n      acc.push(\n        `${mergedRounded.vertical}${spaceLength ? `${padFir}${cur}${padSec}` : cur}${\n          mergedRounded.vertical\n        }`\n      );\n    } else if (padding) {\n      const endLen = spaceLength - paddingLength * 2;\n\n      acc.push(\n        `${mergedRounded.vertical}${' '.repeat(paddingLength * 2)}${cur}${' '.repeat(endLen)}${\n          mergedRounded.vertical\n        }`\n      );\n    } else {\n      acc.push(\n        `${mergedRounded.vertical}${spaceLength > 0 ? `${cur}${pad}` : cur}${\n          mergedRounded.vertical\n        }`\n      );\n    }\n\n    return acc;\n  }, [] as string[]);\n\n  // Generate the padding\n  if (mergedPadding) {\n    for (let i = 0; i < paddingLength; i++) {\n      boxContent.unshift(\n        `${mergedRounded.vertical}${' '.repeat(maxLength)}${mergedRounded.vertical}`\n      );\n      boxContent.push(`${mergedRounded.vertical}${' '.repeat(maxLength)}${mergedRounded.vertical}`);\n    }\n  }\n\n  boxContent = [boxHeader, ...boxContent, boxFooter];\n\n  log && Logger.log(boxContent.join('\\n'));\n\n  return boxContent.join('\\n');\n}\n\nfunction generateComponentOutputVersion(currentVersion: string, newVersion: string) {\n  return `${chalk.white(`${currentVersion} ->`)} ${chalk.yellowBright(`${newVersion} (new)`)}`;\n}\n","export const boxRound = {\n  bold: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  classic: {\n    bottomLeft: '+',\n    bottomRight: '+',\n    horizontal: '-',\n    topLeft: '+',\n    topRight: '+',\n    vertical: '|'\n  },\n  double: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  doubleSingle: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  round: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  single: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  },\n  singleDouble: {\n    bottomLeft: '',\n    bottomRight: '',\n    horizontal: '',\n    topLeft: '',\n    topRight: '',\n    vertical: ''\n  }\n};\n","import {exec} from 'node:child_process';\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport retry from 'async-retry';\nimport chalk from 'chalk';\nimport ora, {oraPromise} from 'ora';\n\nimport {Logger} from '@helpers/logger';\nimport {transformPeerVersion} from '@helpers/utils';\nimport {COMPONENTS_PATH} from 'src/constants/path';\nimport {getStore} from 'src/constants/store';\n\nimport {getPackageData} from './cache/cache';\n\nexport type Dependencies = Record<string, string>;\n\nexport type Components = {\n  name: string;\n  package: string;\n  version: string;\n  docs: string;\n  description: string;\n  status: string;\n  style: string;\n  peerDependencies: Dependencies;\n}[];\n\nexport type ComponentsJson = {\n  version: string;\n  components: Components;\n};\n\n/**\n * Compare two versions\n * @example compareVersions('1.0.0', '1.0.1') // -1\n * compareVersions('1.0.1', '1.0.0') // 1\n * compareVersions('1.0.0', '1.0.0') // 0\n * @param version1\n * @param version2\n */\nexport function compareVersions(version1: string, version2: string) {\n  version1 = transformPeerVersion(version1);\n  version2 = transformPeerVersion(version2);\n\n  const parts1 = version1.split('.').map(Number);\n  const parts2 = version2.split('.').map(Number);\n\n  for (let i = 0; i < parts1.length; i++) {\n    if (parts1[i] !== undefined && parts2[i] !== undefined) {\n      if (parts1[i]! > parts2[i]!) {\n        return 1;\n      } else if (parts1[i]! < parts2[i]!) {\n        return -1;\n      }\n    }\n  }\n\n  return 0;\n}\n\nexport async function updateComponents() {\n  if (!existsSync(COMPONENTS_PATH)) {\n    // First time download the latest date from net\n    await autoUpdateComponents();\n\n    return;\n  }\n\n  const components = JSON.parse(readFileSync(COMPONENTS_PATH, 'utf-8')) as ComponentsJson;\n  const currentVersion = components.version;\n  const latestVersion = await getStore('latestVersion');\n\n  if (compareVersions(currentVersion, latestVersion) === -1) {\n    // After the first time, check the version and update\n    await autoUpdateComponents(latestVersion);\n\n    return;\n  }\n}\n\nexport async function getComponents() {\n  let components: ComponentsJson = {} as ComponentsJson;\n\n  await updateComponents();\n\n  try {\n    components = JSON.parse(readFileSync(COMPONENTS_PATH, 'utf-8')) as ComponentsJson;\n  } catch (error) {\n    new Error(`Get components.json error: ${error}`);\n  }\n\n  return components;\n}\n\nexport async function oraExecCmd(cmd: string, text?: string) {\n  text = text ?? `Executing ${cmd}`;\n\n  const spinner = ora({\n    // Open ctrl + c cancel\n    discardStdin: false,\n    spinner: {\n      frames: [\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`,\n        ` ${chalk.gray(`${text}..`)}`,\n        ` ${chalk.gray(`${text}...`)}`,\n        ` ${chalk.gray(`${text}.`)}`\n      ],\n      interval: 150\n    }\n  });\n\n  spinner.start();\n\n  const result = await new Promise((resolve) => {\n    exec(cmd, (error, stdout) => {\n      if (error) {\n        Logger.error(`Exec cmd ${cmd} error`);\n        process.exit(1);\n      }\n      resolve(stdout.trim());\n    });\n  });\n\n  spinner.stop();\n\n  return result as string;\n}\n\nexport async function getLatestVersion(packageName: string): Promise<string> {\n  const result = await getPackageData(packageName);\n\n  return result.version;\n}\n\nconst getUnpkgUrl = (version: string) =>\n  `https://unpkg.com/@nextui-org/react@${version}/dist/components.json`;\n\nexport async function autoUpdateComponents(latestVersion?: string) {\n  latestVersion = latestVersion || ((await getStore('latestVersion')) as string);\n  const url = getUnpkgUrl(latestVersion);\n\n  const components = await downloadFile(url);\n\n  const componentsJson = {\n    components,\n    version: latestVersion\n  };\n\n  writeFileSync(COMPONENTS_PATH, JSON.stringify(componentsJson, null, 2), 'utf-8');\n}\n\nexport async function downloadFile(url: string): Promise<Components> {\n  let data;\n\n  await oraPromise(\n    retry(\n      async (bail) => {\n        try {\n          const result = await fetch(url, {\n            body: null,\n            headers: {\n              'Content-Type': 'application/json',\n              accept:\n                'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7'\n            },\n            method: 'GET',\n            mode: 'cors'\n          });\n\n          data = JSON.parse(await result.text());\n        } catch (error) {\n          bail(error);\n        }\n      },\n      {\n        retries: 3\n      }\n    ),\n    {\n      failText(error) {\n        Logger.prefix('error', `Update components data error: ${error}`);\n        process.exit(1);\n      },\n      successText: (() => {\n        return chalk.greenBright('Components data updated successfully!\\n');\n      })(),\n      text: 'Fetching components data...'\n    }\n  );\n\n  return data;\n}\n\nexport const isGithubAction = process.env['CI'] === 'true';\n","import type {Agent} from './detect';\nimport type {PascalCase, SAFE_ANY} from './type';\n\nimport chalk from 'chalk';\nimport fg, {type Options} from 'fast-glob';\n\nimport {ROOT} from 'src/constants/path';\n\nimport {Logger} from './logger';\nimport {colorMatchRegex} from './output-info';\n\nexport const versionModeRegex = /([\\^~])/;\n\nexport function getCommandDescAndLog(log: string, desc: string) {\n  Logger.gradient(log);\n\n  return desc;\n}\n\n/**\n * Convert a string to PascalCase.\n * @example 'test-test' => 'TestTest'\n * @param str\n */\nexport function PasCalCase<T extends string>(str: T) {\n  return str\n    .split('-')\n    .map((s) => s.charAt(0).toUpperCase() + s.slice(1))\n    .join('') as PascalCase<T>;\n}\n\n/**\n * Find files by glob pattern.\n * @param glob\n * @param options\n */\nexport const findFiles = (glob: string, options?: Options) => {\n  const file = fg.sync(`${glob}`, {\n    absolute: true,\n    cwd: ROOT,\n    deep: 5,\n    ignore: ['node_modules/**', 'dist/**', 'build/**', 'coverage/**', 'public/**', 'out/**'],\n    onlyFiles: true,\n    ...options\n  });\n\n  return file;\n};\n\nexport function transformOption(options: boolean | 'false') {\n  if (options === 'false') return false;\n\n  return !!options;\n}\n\nexport function omit(obj: Record<string, SAFE_ANY>, keys: string[]) {\n  return Object.fromEntries(Object.entries(obj).filter(([key]) => !keys.includes(key)));\n}\n\nexport function getUpgradeType({\n  major,\n  minor,\n  patch\n}: {\n  major: boolean;\n  minor: boolean;\n  patch: boolean;\n}) {\n  if (major) return 'major';\n  if (minor) return 'minor';\n  if (patch) return 'patch';\n\n  return 'minor';\n}\n\nexport function getColorVersion(currentVersion: string, latestVersion: string) {\n  currentVersion = transformPeerVersion(currentVersion);\n  latestVersion = transformPeerVersion(latestVersion);\n\n  if (isMajorUpdate(currentVersion, latestVersion)) {\n    return isMajorUpdate(currentVersion, latestVersion);\n  } else if (isMinorUpdate(currentVersion, latestVersion)) {\n    return isMinorUpdate(currentVersion, latestVersion);\n  } else if (isPatchUpdate(currentVersion, latestVersion)) {\n    return isPatchUpdate(currentVersion, latestVersion);\n  }\n\n  return latestVersion;\n}\n\nexport function isMajorUpdate(currentVersion: string, latestVersion: string) {\n  const currentVersionArr = currentVersion.split('.');\n  const latestVersionArr = latestVersion.split('.');\n\n  if (currentVersionArr[0] !== latestVersionArr[0]) {\n    return chalk.redBright(latestVersionArr.join('.'));\n  }\n\n  return '';\n}\n\nexport function isMinorUpdate(currentVersion: string, latestVersion: string) {\n  const currentVersionArr = currentVersion.split('.');\n  const latestVersionArr = latestVersion.split('.');\n\n  if (currentVersionArr[1] !== latestVersionArr[1]) {\n    return `${chalk.white(latestVersionArr[0])}${chalk.white('.')}${chalk.cyanBright(\n      latestVersionArr.slice(1, 3).join('.')\n    )}`;\n  }\n\n  return '';\n}\n\nexport function isPatchUpdate(currentVersion: string, latestVersion: string) {\n  const currentVersionArr = currentVersion.split('.');\n  const latestVersionArr = latestVersion.split('.');\n\n  if (currentVersionArr[2] !== latestVersionArr[2]) {\n    return `${chalk.white(latestVersionArr.slice(0, 2).join('.'))}${chalk.white(\n      '.'\n    )}${chalk.greenBright(latestVersionArr[2])}`;\n  }\n\n  return '';\n}\n\nexport function getVersionAndMode(allDependencies: Record<string, SAFE_ANY>, packageName: string) {\n  const currentVersion = allDependencies[packageName].replace(versionModeRegex, '');\n  const versionMode = allDependencies[packageName].match(versionModeRegex)?.[1] || '';\n\n  return {\n    currentVersion,\n    versionMode\n  };\n}\n\nexport function getPackageManagerInfo<T extends Agent = Agent>(packageManager: T) {\n  const packageManagerInfo = {\n    bun: {\n      install: 'add',\n      remove: 'remove',\n      run: 'run'\n    },\n    npm: {\n      install: 'install',\n      remove: 'uninstall',\n      run: 'run'\n    },\n    pnpm: {\n      install: 'add',\n      remove: 'remove',\n      run: 'run'\n    },\n    yarn: {\n      install: 'add',\n      remove: 'remove',\n      run: 'run'\n    }\n  } as const;\n\n  return packageManagerInfo[packageManager] as (typeof packageManagerInfo)[T];\n}\n\n/**\n * @example transformPeerVersion('>=1.0.0') // '1.0.0'\n * @param version\n */\nexport function transformPeerVersion(version: string) {\n  return version.replace(/\\^|~|>=|<=|>|</g, '');\n}\n\nexport function fillAnsiLength(str: string, length: number) {\n  const stripStr = str.replace(colorMatchRegex, '');\n  const fillSpace = length - stripStr.length > 0 ? ' '.repeat(length - stripStr.length) : '';\n\n  return `${str}${fillSpace}`;\n}\n\nexport function strip(str: string) {\n  return str.replace(colorMatchRegex, '');\n}\n","import {fileURLToPath} from 'node:url';\n\nimport {resolve} from 'pathe';\n\nexport const ROOT = process.cwd();\nexport const resolver = (path: string) => resolve(ROOT, path);\n\nexport const COMPONENTS_PATH = resolve(fileURLToPath(import.meta.url), '../components.json');\n","import type {SAFE_ANY} from '@helpers/type';\n\nimport {existsSync, mkdirSync, readFileSync, unlinkSync, writeFileSync} from 'node:fs';\n\nimport {oraExecCmd} from '../helpers';\nimport {CACHE_DIR, CACHE_PATH} from '../path';\n\nconst cacheTTL = 30 * 60_000; // 30min\nlet noCache = false;\n\nexport interface CacheData {\n  [packageName: string]: {\n    version: string;\n    date: Date;\n    formatDate: string;\n    expiredDate: number;\n    expiredFormatDate: string;\n    execResult: SAFE_ANY;\n  };\n}\n\nexport function initCache(_noCache = noCache) {\n  noCache = !!_noCache;\n\n  const isExistCache = existsSync(CACHE_DIR);\n\n  if (isExistCache) return;\n\n  mkdirSync(CACHE_DIR, {recursive: true});\n  writeFileSync(CACHE_PATH, JSON.stringify({}), 'utf8');\n}\n\nexport function getCacheData(): CacheData {\n  const data = readFileSync(CACHE_PATH, 'utf8');\n\n  return JSON.parse(data);\n}\n\n/**\n * Used to cache unknown npm package expired time 30m\n * @packageName string\n */\nexport function cacheData(\n  packageName: string,\n  packageData: {\n    version?: string;\n    execResult?: SAFE_ANY;\n  },\n  cacheData?: CacheData\n) {\n  initCache();\n\n  const data = cacheData ?? getCacheData();\n  const now = new Date();\n  const expiredDate = +now + cacheTTL;\n\n  data[packageName] = {\n    ...(packageData as SAFE_ANY),\n    date: now,\n    expiredDate,\n    expiredFormatDate: new Date(expiredDate).toString(),\n    formatDate: now.toString()\n  };\n\n  writeFileSync(CACHE_PATH, JSON.stringify(data, undefined, 2), 'utf-8');\n}\n\nexport function removeCache() {\n  unlinkSync(CACHE_DIR);\n}\n\nfunction now() {\n  return +new Date();\n}\n\nfunction ttl(n: number) {\n  return now() - n;\n}\n\nexport function isExpired(packageName: string, cacheData?: CacheData) {\n  // If noCache then always return true\n  if (noCache) return true;\n\n  const data = cacheData ?? getCacheData();\n  const pkgData = data[packageName];\n\n  if (!pkgData?.expiredDate) return true;\n\n  return ttl(pkgData.expiredDate) > 0;\n}\n\nexport async function getPackageData(packageName: string) {\n  const data = getCacheData();\n  const isExpiredPkg = isExpired(packageName, data);\n\n  // If expired or don't exist then init data\n  if (isExpiredPkg) {\n    const version = await oraExecCmd(\n      `npm view ${packageName} version`,\n      `Fetching ${packageName} latest version`\n    );\n\n    cacheData(packageName, {version}, data);\n  }\n\n  return data[packageName]!;\n}\n\nexport async function getCacheExecData(key: string) {\n  const data = getCacheData();\n  const isExpiredPkg = isExpired(key, data);\n\n  // If expired or don't exist then init data\n  if (isExpiredPkg) {\n    const execResult = await oraExecCmd(key);\n\n    cacheData(key, {execResult}, data);\n  }\n\n  return data[key]!.execResult;\n}\n","import {existsSync} from 'node:fs';\nimport {fileURLToPath} from 'node:url';\n\nimport {join, resolve} from 'pathe';\n\nexport const ROOT = resolve(fileURLToPath(import.meta.url), '../..');\n\nexport const resolver = (path: string) => resolve(ROOT, path);\n\nconst PROD_DIR = resolve(fileURLToPath(import.meta.url), '..');\nconst PROD = existsSync(join(PROD_DIR, 'components.json'));\n\nexport const CACHE_DIR = PROD\n  ? resolve(`${PROD_DIR}/.nextui-cli-cache`)\n  : resolve(join(ROOT, '..'), 'node_modules/.nextui-cli-cache');\nexport const CACHE_PATH = resolve(`${CACHE_DIR}/data.json`);\n","import {existsSync} from 'node:fs';\n\nimport fg from 'fast-glob';\nimport {join} from 'pathe';\n\nimport {getPackageInfo} from '@helpers/package';\n\nimport {type NextUIComponent, type NextUIComponents} from './component';\nimport {resolver} from './path';\n\nexport const NEXTUI_CLI = 'nextui-cli';\n\nexport const FRAMER_MOTION = 'framer-motion';\nexport const TAILWINDCSS = 'tailwindcss';\nexport const NEXT_UI = '@nextui-org/react';\nexport const THEME_UI = '@nextui-org/theme';\nexport const SYSTEM_UI = '@nextui-org/system';\nexport const ALL_COMPONENTS_REQUIRED = [NEXT_UI, FRAMER_MOTION] as const;\n\nexport const DOCS_INSTALLED = 'https://nextui.org/docs/guide/installation#global-installation';\nexport const DOCS_TAILWINDCSS_SETUP =\n  'https://nextui.org/docs/guide/installation#tailwind-css-setup';\nexport const DOCS_APP_SETUP = 'https://nextui.org/docs/guide/installation#provider-setup';\nexport const DOCS_PNPM_SETUP = 'https://nextui.org/docs/guide/installation#setup-pnpm-optional';\nexport const DOCS_PROVIDER_SETUP = 'https://nextui.org/docs/guide/installation#provider-setup';\n\n// Record the required content of tailwind.config file\nexport const tailwindRequired = {\n  checkPluginsRegex: /nextui(([\\W\\w]+)?)/,\n  content: './node_modules/@nextui-org/theme/dist/**/*.{js,ts,jsx,tsx}',\n  darkMode: 'darkMode: \"class\"',\n  importContent: (isTypescript = false) => {\n    if (isTypescript) {\n      return `import {nextui} from '@nextui-org/theme';`;\n    }\n\n    return `const {nextui} = require('@nextui-org/theme');`;\n  },\n  plugins: 'nextui()'\n} as const;\n\nexport const individualTailwindRequired = {\n  content: (currentComponents: NextUIComponents, isPnpm: boolean) => {\n    currentComponents.forEach((component) => {\n      const walkDeps = walkDepComponents(component, isPnpm) as NextUIComponents;\n\n      currentComponents.push(...walkDeps);\n    });\n\n    const outputComponents = [\n      ...new Set(\n        currentComponents.map((component) => {\n          return component.style || component.name;\n        })\n      )\n    ];\n\n    if (outputComponents.length === 1) {\n      return `./node_modules/@nextui-org/theme/dist/components/${currentComponents[0]}.js`;\n    }\n    const requiredContent = outputComponents\n      .reduce((acc, component) => {\n        return (acc += `${component}|`);\n      }, '')\n      .replace(/\\|$/, '');\n\n    return `./node_modules/@nextui-org/theme/dist/components/(${requiredContent}).js`;\n  },\n  plugins: 'nextui()'\n} as const;\n\nexport const appRequired = {\n  import: 'NextUIProvider'\n} as const;\n\nexport const pnpmRequired = {\n  content: 'public-hoist-pattern[]=*@nextui-org/*'\n} as const;\n\nexport function walkDepComponents(nextUIComponent: NextUIComponent, isPnpm: boolean) {\n  const component = nextUIComponent.name;\n  let componentPath = resolver(`node_modules/@nextui-org/${component}`);\n  const components = [nextUIComponent];\n\n  if (!existsSync(componentPath) && isPnpm) {\n    const pnpmDir = resolver('node_modules/.pnpm');\n\n    const file = fg.sync(`**/@nextui-org/${component}`, {\n      absolute: true,\n      cwd: pnpmDir,\n      onlyDirectories: true\n    })[0];\n\n    if (file) {\n      componentPath = file;\n    } else {\n      return components;\n    }\n  }\n\n  const {currentComponents} = getPackageInfo(join(componentPath, 'package.json'));\n\n  if (currentComponents.length) {\n    for (const component of currentComponents) {\n      const result = walkDepComponents(component, isPnpm);\n\n      components.push(...result);\n    }\n  }\n\n  return components;\n}\n","import type {UpgradeOption} from './upgrade';\n\nimport {readFileSync} from 'node:fs';\n\nimport {type NextUIComponents} from 'src/constants/component';\nimport {NEXT_UI} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {getCacheExecData} from 'src/scripts/cache/cache';\nimport {getLatestVersion} from 'src/scripts/helpers';\n\nimport {Logger} from './logger';\nimport {colorMatchRegex} from './output-info';\nimport {getVersionAndMode} from './utils';\n\n/**\n * Get the package information\n * @param packagePath string\n * @param transformVersion boolean\n */\nexport function getPackageInfo(packagePath: string, transformVersion = true) {\n  let pkg;\n\n  try {\n    pkg = JSON.parse(readFileSync(packagePath, 'utf-8'));\n  } catch (error) {\n    Logger.prefix('error', `Error reading package.json file: ${packagePath} \\nError: ${error}`);\n  }\n\n  const devDependencies = pkg.devDependencies || {};\n  const dependencies = pkg.dependencies || {};\n  const allDependencies = {...devDependencies, ...dependencies};\n  const allDependenciesKeys = new Set(Object.keys(allDependencies));\n\n  const currentComponents = (store.nextUIComponents as unknown as NextUIComponents)\n    .map((component) => {\n      let version = component.version;\n      let versionMode = component.versionMode;\n\n      if (allDependenciesKeys.has(component.package)) {\n        const data = getVersionAndMode(allDependencies, component.package);\n\n        version = transformVersion ? `${data.currentVersion} new: ${version}` : data.currentVersion;\n        versionMode = data.versionMode;\n      }\n\n      return {\n        ...component,\n        version,\n        versionMode\n      };\n    })\n    .filter((component) => allDependenciesKeys.has(component.package)) as NextUIComponents;\n  const isAllComponents = allDependenciesKeys.has(NEXT_UI);\n\n  return {\n    allDependencies,\n    allDependenciesKeys,\n    currentComponents,\n    dependencies,\n    devDependencies,\n    isAllComponents,\n    package: pkg\n  };\n}\n\nexport function transformComponentsToPackage(components: string[]) {\n  return components.map((component) => {\n    const nextuiComponent = store.nextUIComponentsMap[component];\n    const packageName = nextuiComponent?.package;\n\n    return packageName ? packageName : component;\n  });\n}\n\n/**\n * Get the package detail information\n * @param components need package name\n * @param allDependencies\n * @returns\n */\nexport async function transformPackageDetail(\n  components: string[],\n  allDependencies: Record<string, string>,\n  transformVersion = true\n): Promise<NextUIComponents> {\n  const result: NextUIComponents = [];\n\n  for (const component of components) {\n    let {currentVersion} = getVersionAndMode(allDependencies, component);\n    const {versionMode} = getVersionAndMode(allDependencies, component);\n    const docs = (\n      ((await getCacheExecData(`npm show ${component} homepage`)) || '') as string\n    ).replace(/\\n/, '');\n    const description = (\n      ((await getCacheExecData(`npm show ${component} description`)) || '') as string\n    ).replace(/\\n/, '');\n    const latestVersion =\n      store.nextUIComponentsPackageMap[component]?.version || (await getLatestVersion(component));\n\n    currentVersion = transformVersion ? `${currentVersion} new: ${latestVersion}` : currentVersion;\n\n    const detailPackageInfo: NextUIComponents[0] = {\n      description: description || '',\n      docs: docs || '',\n      name: component,\n      package: component,\n      peerDependencies: {},\n      status: 'stable',\n      style: '',\n      version: currentVersion,\n      versionMode: versionMode\n    };\n\n    result.push(detailPackageInfo);\n  }\n\n  return result;\n}\n\n/**\n * Get the complete version\n * @example getCompleteVersion({latestVersion: '1.0.0', versionMode: '^'}) --> '^1.0.0'\n */\nexport function getCompleteVersion(upgradeOption: UpgradeOption) {\n  return `${upgradeOption.versionMode || ''}${upgradeOption.latestVersion.replace(\n    colorMatchRegex,\n    ''\n  )}`;\n}\n","import type {ExtractStoreData, SAFE_ANY} from '@helpers/type';\n\nimport {type Components, getLatestVersion} from 'src/scripts/helpers';\n\nimport {NEXTUI_CLI, NEXT_UI} from './required';\n\nexport type NextUIComponentsMap = Record<string, Components[0]>;\n\nexport type Store = {\n  debug: boolean;\n  cliLatestVersion: string;\n  latestVersion: string;\n  nextUIComponents: Components;\n  nextUIComponentsKeys: string[];\n  nextUIcomponentsPackages: string[];\n  nextUIComponentsKeysSet: Set<string>;\n  nextUIComponentsMap: NextUIComponentsMap;\n  nextUIComponentsPackageMap: NextUIComponentsMap;\n};\n\nexport const store = {} as Store;\n\nexport type StoreKeys = keyof Store;\n\nexport async function getStore<T extends StoreKeys = StoreKeys>(\n  key: T\n): Promise<ExtractStoreData<T>> {\n  let data = store[key];\n\n  if (!data) {\n    if (key === 'latestVersion') {\n      data = (await getLatestVersion(NEXT_UI)) as SAFE_ANY;\n\n      store[key] = data;\n    } else if (key === 'cliLatestVersion') {\n      data = (await getLatestVersion(NEXTUI_CLI)) as SAFE_ANY;\n\n      store[key] = data;\n    }\n  }\n\n  return data as unknown as Promise<ExtractStoreData<T>>;\n}\n\nexport function getStoreSync<T extends StoreKeys = StoreKeys>(key: T) {\n  return store[key] as unknown as ExtractStoreData<T>;\n}\n","import type {Components} from 'src/scripts/helpers';\n\nimport {store} from './store';\n\nexport function getNextuiComponentsData(nextUIComponents: Components) {\n  const nextUIComponentsKeys = nextUIComponents.map((component) => component.name);\n  const nextUIcomponentsPackages = nextUIComponents.map((component) => component.package);\n\n  const nextUIComponentsKeysSet = new Set(nextUIComponentsKeys);\n\n  const nextUIComponentsMap = nextUIComponents.reduce((acc, component) => {\n    acc[component.name] = component;\n\n    return acc;\n  }, {} as NextUIComponentsMap);\n  const nextUIComponentsPackageMap = nextUIComponents.reduce((acc, component) => {\n    acc[component.package] = component;\n\n    return acc;\n  }, {} as NextUIComponentsMap);\n\n  return {\n    nextUIComponentsKeys,\n    nextUIComponentsKeysSet,\n    nextUIComponentsMap,\n    nextUIComponentsPackageMap,\n    nextUIcomponentsPackages\n  };\n}\n\nexport function initStoreComponentsData(nextUIComponents: Components) {\n  const {\n    nextUIComponentsKeys,\n    nextUIComponentsKeysSet,\n    nextUIComponentsMap,\n    nextUIComponentsPackageMap,\n    nextUIcomponentsPackages\n  } = getNextuiComponentsData(nextUIComponents);\n\n  store.nextUIComponents = nextUIComponents;\n  store.nextUIComponentsKeys = nextUIComponentsKeys;\n  store.nextUIComponentsKeysSet = nextUIComponentsKeysSet;\n  store.nextUIComponentsMap = nextUIComponentsMap;\n  store.nextUIComponentsPackageMap = nextUIComponentsPackageMap;\n  store.nextUIcomponentsPackages = nextUIcomponentsPackages;\n}\n\nexport type NextUIComponentsMap = Record<string, (typeof store.nextUIComponents)[number]>;\n\nexport const orderNextUIComponentKeys = ['package', 'version', 'status', 'docs'] as const;\n\nexport const colorNextUIComponentKeys = ['package', 'version', 'status'];\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type NextUIComponentStatus = 'stable' | 'updated' | 'new' | (string & {});\n\nexport type NextUIComponent = (typeof store.nextUIComponents)[0];\n\nexport type NextUIComponents = (Omit<NextUIComponent, 'status'> & {\n  status: NextUIComponentStatus;\n  versionMode: string;\n})[];\n","{\n  \"name\": \"nextui-cli\",\n  \"private\": false,\n  \"type\": \"module\",\n  \"license\": \"MIT\",\n  \"version\": \"0.3.4\",\n  \"homepage\": \"https://github.com/nextui-org/nextui-cli#readme\",\n  \"description\": \"A CLI tool that unlocks seamless NextUI integration\",\n  \"keywords\": [\n    \"UI\",\n    \"CLI\",\n    \"Tool\",\n    \"NextUI\",\n    \"Template\",\n    \"Integration\",\n    \"Add Component\"\n  ],\n  \"author\": {\n    \"name\": \"NextUI\",\n    \"email\": \"support@nextui.org\",\n    \"url\": \"https://github.com/nextui-org\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/nextui-org/nextui-cli.git\"\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/nextui-org/nextui-cli/issues\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\",\n    \"registry\": \"https://registry.npmjs.org/\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"bin\": {\n    \"nextui\": \"./dist/index.js\"\n  },\n  \"main\": \"./dist/index.js\",\n  \"module\": \"./dist/index.js\",\n  \"types\": \"./dist/index.d.ts\",\n  \"scripts\": {\n    \"dev\": \"tsup --watch\",\n    \"link:cli\": \"pnpm link --global\",\n    \"link:remove\": \"pnpm uninstall --global nextui-cli\",\n    \"build\": \"tsup\",\n    \"update:components\": \"tsx src/scripts/update/update-components.ts\",\n    \"sync:docs\": \"tsx src/scripts/sync/sync.ts\",\n    \"clean:cache\": \"tsx src/scripts/cache/clean.ts\",\n    \"lint\": \"eslint . --max-warnings=0\",\n    \"lint:fix\": \"eslint . --max-warnings=0 --fix\",\n    \"check:prettier\": \"prettier --check .\",\n    \"check:types\": \"tsc --noEmit\",\n    \"changelog\": \"npx conventional-changelog -p angular -i CHANGELOG.md -s --commit-path .\",\n    \"release\": \"bumpp --execute='pnpm run changelog' --all\",\n    \"prepare\": \"husky install\",\n    \"postbuild\": \"pnpm run update:components\",\n    \"prepublishOnly\": \"pnpm run build\"\n  },\n  \"dependencies\": {\n    \"@clack/prompts\": \"0.7.0\",\n    \"@winches/prompts\": \"0.0.6\",\n    \"async-retry\": \"1.3.3\",\n    \"chalk\": \"5.3.0\",\n    \"commander\": \"11.0.0\",\n    \"fast-glob\": \"3.3.2\",\n    \"find-up\": \"7.0.0\",\n    \"gradient-string\": \"2.0.2\",\n    \"ora\": \"8.0.1\",\n    \"pathe\": \"1.1.2\",\n    \"tar\": \"6.2.1\"\n  },\n  \"devDependencies\": {\n    \"@commitlint/cli\": \"17.7.1\",\n    \"@commitlint/config-conventional\": \"17.7.0\",\n    \"@types/gradient-string\": \"1.1.3\",\n    \"@types/node\": \"20.11.30\",\n    \"@typescript-eslint/eslint-plugin\": \"6.7.2\",\n    \"@typescript-eslint/parser\": \"6.7.2\",\n    \"bumpp\": \"9.4.0\",\n    \"clean-package\": \"2.2.0\",\n    \"commitlint-plugin-function-rules\": \"2.0.2\",\n    \"conventional-changelog-cli\": \"4.1.0\",\n    \"eslint\": \"8.50.0\",\n    \"eslint-config-prettier\": \"9.0.0\",\n    \"eslint-import-resolver-typescript\": \"3.6.1\",\n    \"eslint-plugin-import\": \"2.28.1\",\n    \"eslint-plugin-prettier\": \"5.0.0\",\n    \"eslint-plugin-sort-destructure-keys\": \"1.5.0\",\n    \"eslint-plugin-sort-keys-fix\": \"1.1.2\",\n    \"eslint-plugin-unicorn\": \"52.0.0\",\n    \"eslint-plugin-unused-imports\": \"3.0.0\",\n    \"husky\": \"8.0.3\",\n    \"lint-staged\": \"14.0.1\",\n    \"prettier\": \"3.3.2\",\n    \"tsup\": \"7.2.0\",\n    \"tsx\": \"4.7.1\",\n    \"typescript\": \"5.2.2\"\n  },\n  \"engines\": {\n    \"pnpm\": \">=9.x\",\n    \"node\": \">=18.17.x\"\n  },\n  \"packageManager\": \"pnpm@9.6.0\"\n}\n","/* eslint-disable no-var */\nimport type {SAFE_ANY} from '@helpers/type';\n\nimport {existsSync, writeFileSync} from 'node:fs';\n\nimport chalk from 'chalk';\n\nimport {\n  checkApp,\n  checkIllegalComponents,\n  checkPnpm,\n  checkRequiredContentInstalled,\n  checkTailwind\n} from '@helpers/check';\nimport {debugExecAddAction} from '@helpers/debug';\nimport {detect} from '@helpers/detect';\nimport {fixPnpm, fixProvider, fixTailwind} from '@helpers/fix';\nimport {Logger} from '@helpers/logger';\nimport {getPackageInfo} from '@helpers/package';\nimport {findFiles} from '@helpers/utils';\nimport {resolver} from 'src/constants/path';\nimport {\n  DOCS_PROVIDER_SETUP,\n  NEXT_UI,\n  individualTailwindRequired,\n  pnpmRequired\n} from 'src/constants/required';\nimport {getStoreSync, store} from 'src/constants/store';\nimport {tailwindTemplate} from 'src/constants/templates';\nimport {getAutocompleteMultiselect} from 'src/prompts';\n\ninterface AddActionOptions {\n  all?: boolean;\n  prettier?: boolean;\n  packagePath?: string;\n  tailwindPath?: string;\n  appPath?: string;\n  addApp?: boolean;\n}\n\nexport async function addAction(components: string[], options: AddActionOptions) {\n  const {\n    addApp = false,\n    all = false,\n    appPath = findFiles('**/App.(j|t)sx')[0],\n    packagePath = resolver('package.json'),\n    tailwindPath = findFiles('**/tailwind.config.(j|t)s')[0]\n  } = options;\n\n  var {allDependencies, allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n  const prettier = options.prettier ?? allDependenciesKeys.has('prettier');\n\n  const isNextUIAll = !!allDependencies[NEXT_UI];\n\n  if (!components.length && !all) {\n    components = await getAutocompleteMultiselect(\n      'Which components would you like to add?',\n      store.nextUIComponents\n        .filter(\n          (component) =>\n            !currentComponents.some((currentComponent) => currentComponent.name === component.name)\n        )\n        .map((component) => {\n          return {\n            description: component.description,\n            title: component.name,\n            value: component.name\n          };\n        })\n    );\n  } else if (all) {\n    components = [NEXT_UI];\n  }\n\n  /** ======================== Add judge whether illegal component exist ======================== */\n  if (!all && !checkIllegalComponents(components)) {\n    return;\n  }\n\n  // Check whether have added the NextUI components\n  var {allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n\n  const currentComponentsKeys = currentComponents.map((c) => c.name);\n  const filterCurrentComponents = components.filter(\n    (c) => currentComponentsKeys.includes(c) || (isNextUIAll && c === NEXT_UI)\n  );\n\n  if (filterCurrentComponents.length && !getStoreSync('debug')) {\n    Logger.prefix(\n      'error',\n      ` You have already added the following components: ${filterCurrentComponents\n        .map((c) => chalk.underline(c))\n        .join(', ')}`\n    );\n\n    return;\n  }\n\n  // Check whether the App.tsx file exists\n  if (addApp && !appPath) {\n    Logger.prefix(\n      'error',\n      \" App.(j|t)sx file not found. Please specify the appPath if the default search path does not locate your file.  'add --appPath=yourAppPath'\"\n    );\n\n    return;\n  }\n\n  const currentPkgManager = await detect();\n  const runCmd = currentPkgManager === 'npm' ? 'install' : 'add';\n\n  /** ======================== Step 1 Add dependencies required ======================== */\n  if (all) {\n    const [, ...missingDependencies] = await checkRequiredContentInstalled(\n      'all',\n      allDependenciesKeys\n    );\n\n    if (missingDependencies.length) {\n      Logger.info(\n        `Adding required dependencies: ${[...missingDependencies]\n          .map((c) => chalk.underline(c))\n          .join(', ')}`\n      );\n\n      await debugExecAddAction(\n        `${currentPkgManager} ${runCmd} ${[...missingDependencies].join(' ')}`,\n        missingDependencies\n      );\n    }\n  } else {\n    const [, ..._missingDependencies] = await checkRequiredContentInstalled(\n      'partial',\n      allDependenciesKeys\n    );\n    const missingDependencies = [\n      ..._missingDependencies,\n      ...components.map((c) => store.nextUIComponentsMap[c]!.package)\n    ];\n\n    Logger.info(\n      `Adding required dependencies: ${[...missingDependencies]\n        .map((c) => chalk.underline(c))\n        .join(', ')}`\n    );\n\n    await debugExecAddAction(\n      `${currentPkgManager} ${runCmd} ${[...missingDependencies].join(' ')}`,\n      missingDependencies\n    );\n  }\n\n  // After install the required dependencies, get the latest package information\n  var {allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n\n  /** ======================== Step 2 Tailwind CSS Setup ======================== */\n  const type: SAFE_ANY = all ? 'all' : 'partial';\n\n  const isPnpm = currentPkgManager === 'pnpm';\n\n  if (!tailwindPath) {\n    const individualContent = individualTailwindRequired.content(currentComponents, isPnpm);\n    const template = tailwindTemplate(type, individualContent);\n    const tailwindPath = resolver('tailwind.config.js');\n\n    writeFileSync(tailwindPath, template, 'utf-8');\n\n    Logger.newLine();\n    Logger.info(`Tailwind CSS configuration file created at: ${tailwindPath}`);\n  } else {\n    const [, ...errorInfoList] = checkTailwind(\n      type,\n      tailwindPath,\n      currentComponents,\n      isPnpm,\n      undefined,\n      true\n    );\n\n    fixTailwind(type, {errorInfoList, format: prettier, tailwindPath});\n\n    Logger.newLine();\n    Logger.log(`Tailwind CSS settings have been updated in: ${tailwindPath}`);\n  }\n\n  /** ======================== Step 3 Provider Need Manually Open ======================== */\n  if (addApp && appPath && existsSync(appPath)) {\n    const [isCorrectProvider] = checkApp(type, appPath);\n\n    if (!isCorrectProvider) {\n      fixProvider(appPath, {format: prettier});\n\n      Logger.newLine();\n      Logger.info(`NextUIProvider successfully added to the App file at: ${appPath}`);\n      Logger.warn(\n        \"Please check the placement of NextUIProvider in the App file to ensure it's correctly integrated.'\"\n      );\n    }\n  }\n\n  /** ======================== Step 4 Setup Pnpm ======================== */\n  if (currentPkgManager === 'pnpm') {\n    const npmrcPath = resolver('.npmrc');\n\n    if (!existsSync(npmrcPath)) {\n      writeFileSync(resolver('.npmrc'), pnpmRequired.content, 'utf-8');\n    } else {\n      const [isCorrectPnpm] = checkPnpm(npmrcPath);\n\n      if (!isCorrectPnpm) {\n        fixPnpm(npmrcPath);\n      }\n    }\n  }\n\n  // Finish adding the NextUI components\n  Logger.newLine();\n  Logger.success(' Components added successfully');\n\n  // Check whether the user has installed the All NextUI components\n  if ((allDependenciesKeys.has(NEXT_UI) || all) && currentComponents.length) {\n    // Check whether have added redundant dependencies\n    Logger.newLine();\n    Logger.log(\n      `${chalk.yellow('Attention')} Individual components from NextUI do not require the \\`@nextui-org/react\\` package. For optimized bundle sizes, consider using individual components.`\n    );\n    Logger.log('The redundant dependencies are:');\n    [...new Set(currentComponents)].forEach((component) => {\n      Logger.log(`- ${component.package}`);\n    });\n  }\n\n  // Warn the user to check the NextUIProvider whether in the correct place\n  Logger.newLine();\n  Logger.grey(\n    `Please check the ${chalk.bold(\n      'NextUIProvider'\n    )} whether in the correct place (ignore if added)\\nSee more info here: ${DOCS_PROVIDER_SETUP}`\n  );\n\n  process.exit(0);\n}\n","import type {RequiredKey, SAFE_ANY} from './type';\nimport type {ProblemRecord} from 'src/actions/doctor-action';\n\nimport {readFileSync} from 'node:fs';\n\nimport chalk from 'chalk';\n\nimport {type NextUIComponents} from 'src/constants/component';\nimport {\n  DOCS_INSTALLED,\n  DOCS_TAILWINDCSS_SETUP,\n  FRAMER_MOTION,\n  NEXT_UI,\n  SYSTEM_UI,\n  TAILWINDCSS,\n  THEME_UI,\n  appRequired,\n  individualTailwindRequired,\n  pnpmRequired,\n  tailwindRequired\n} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {compareVersions} from 'src/scripts/helpers';\n\nimport {Logger} from './logger';\nimport {getMatchArray, getMatchImport} from './match';\nimport {findMostMatchText} from './math-diff';\nimport {getPackagePeerDep} from './upgrade';\nimport {strip} from './utils';\n\nexport type CheckType = 'all' | 'partial';\nexport type CombineType = 'missingDependencies' | 'incorrectTailwind' | 'incorrectApp';\n\ntype DefaultCombineOptions = {\n  errorInfo: string[];\n  missingDependencies: string[];\n  tailwindName: string;\n};\n\ntype CombineOptions<T extends CombineType> = T extends 'missingDependencies'\n  ? RequiredKey<Partial<DefaultCombineOptions>, 'missingDependencies'>\n  : T extends 'incorrectTailwind'\n  ? RequiredKey<Partial<DefaultCombineOptions>, 'errorInfo' | 'tailwindName'>\n  : T extends 'incorrectApp'\n  ? RequiredKey<Partial<DefaultCombineOptions>, 'errorInfo'>\n  : DefaultCombineOptions;\n\ntype CheckResult<T extends SAFE_ANY[] = SAFE_ANY[]> = [boolean, ...T];\n\nexport function combineProblemRecord<T extends CombineType = CombineType>(\n  type: T,\n  options: CombineOptions<T>\n): ProblemRecord {\n  const {errorInfo, missingDependencies, tailwindName} = options as DefaultCombineOptions;\n\n  if (type === 'missingDependencies') {\n    return {\n      level: 'error',\n      name: 'missingDependencies',\n      outputFn: () => {\n        Logger.log('You have not installed the required dependencies');\n        Logger.newLine();\n        Logger.log('The required dependencies are:');\n        missingDependencies.forEach((dependency) => {\n          Logger.log(`- ${dependency}`);\n        });\n        Logger.newLine();\n        Logger.log(`See more info here: ${chalk.underline(DOCS_INSTALLED)}`);\n      }\n    };\n  } else if (type === 'incorrectTailwind') {\n    return {\n      level: 'error',\n      name: 'incorrectTailwind',\n      outputFn: () => {\n        Logger.log(`Your ${tailwindName} is incorrect`);\n        Logger.newLine();\n        Logger.log('The missing part is:');\n        errorInfo.forEach((info) => {\n          Logger.log(`- need to add ${info}`);\n        });\n        Logger.newLine();\n        Logger.log(`See more info here: ${chalk.underline(`${DOCS_TAILWINDCSS_SETUP}-1`)}`);\n      }\n    };\n  } else {\n    return {\n      level: 'error',\n      name: 'incorrectApp',\n      outputFn: () => {\n        Logger.log('Your App.tsx is incorrect');\n        Logger.newLine();\n        Logger.log('The missing part is:');\n        errorInfo.forEach((info) => {\n          Logger.log(`- need to add ${info}`);\n        });\n        Logger.newLine();\n        Logger.log(`See more info here: ${chalk.underline(DOCS_INSTALLED)}`);\n      }\n    };\n  }\n}\n\ninterface CheckPeerDependenciesConfig {\n  peerDependencies?: boolean;\n  allDependencies?: Record<string, SAFE_ANY>;\n  packageNames?: string[];\n}\n\n/**\n * Check if the required content is installed\n * @example return result and missing required [false, '@nextui-org/react', 'framer-motion']\n * @param type\n * @param dependenciesKeys\n * @param checkPeerDependenciesConfig\n * @returns\n */\nexport async function checkRequiredContentInstalled<\n  T extends CheckPeerDependenciesConfig = CheckPeerDependenciesConfig\n>(\n  type: CheckType,\n  dependenciesKeys: Set<string>,\n  checkPeerDependenciesConfig?: T extends {peerDependencies: infer P}\n    ? P extends true\n      ? Required<CheckPeerDependenciesConfig>\n      : T\n    : T\n): Promise<CheckResult> {\n  const result = [] as unknown as CheckResult;\n  const {allDependencies, packageNames, peerDependencies} = (checkPeerDependenciesConfig ??\n    {}) as Required<CheckPeerDependenciesConfig>;\n  const peerDependenciesList: string[] = [];\n\n  if (peerDependencies) {\n    const peerDepList = await checkPeerDependencies({allDependencies, packageNames});\n\n    peerDependenciesList.push(...peerDepList);\n  }\n\n  if (type === 'all') {\n    const hasAllComponents = dependenciesKeys.has(NEXT_UI);\n    const hasFramerMotion = dependenciesKeys.has(FRAMER_MOTION);\n    const hasTailwind = dependenciesKeys.has(TAILWINDCSS);\n\n    if (hasAllComponents && hasFramerMotion && !peerDependenciesList.length) {\n      return [true];\n    }\n    !hasAllComponents && result.push(NEXT_UI);\n    !hasFramerMotion && result.push(FRAMER_MOTION);\n    !hasTailwind && result.push(TAILWINDCSS);\n  } else if (type === 'partial') {\n    const hasFramerMotion = dependenciesKeys.has(FRAMER_MOTION);\n    const hasTailwind = dependenciesKeys.has(TAILWINDCSS);\n    const hasSystemUI = dependenciesKeys.has(SYSTEM_UI);\n    const hasThemeUI = dependenciesKeys.has(THEME_UI);\n\n    if (hasFramerMotion && hasSystemUI && hasThemeUI && !peerDependenciesList.length) {\n      return [true];\n    }\n    !hasFramerMotion && result.push(FRAMER_MOTION);\n    !hasSystemUI && result.push(SYSTEM_UI);\n    !hasThemeUI && result.push(THEME_UI);\n    !hasTailwind && result.push(TAILWINDCSS);\n  }\n\n  return [false, ...result, ...(peerDependencies ? peerDependenciesList : [])];\n}\n\nexport async function checkPeerDependencies(\n  config: Required<Omit<CheckPeerDependenciesConfig, 'peerDependencies'>>\n) {\n  const {allDependencies, packageNames} = config;\n  const peerDepList: string[] = [];\n\n  for (const packageName of packageNames) {\n    const result = await getPackagePeerDep(packageName, allDependencies, new Set());\n\n    for (const peerData of result) {\n      if (!peerData.isLatest) {\n        // If there are not the latest version, add the peerDependencies to the list\n        const findPeerDepIndex = peerDepList.findIndex((peerDep) =>\n          peerDep.includes(peerData.package)\n        );\n        const findPeerDep = strip(peerDepList[findPeerDepIndex] || '');\n        const findPeerDepVersion = findPeerDep?.match(/@([\\d.]+)/)?.[1];\n\n        // If the peerDependencies is not the latest version, remove the old version and add the latest version\n        if (\n          findPeerDepVersion &&\n          compareVersions(findPeerDepVersion, strip(peerData.latestVersion)) <= 0\n        ) {\n          peerDepList.splice(findPeerDepIndex, 1);\n        }\n        peerDepList.push(`${peerData.package}@${peerData.latestVersion}`);\n      }\n    }\n  }\n\n  return peerDepList;\n}\n\n/**\n * Check if the tailwind.config file is correct\n * @param type\n * @param tailwindPath\n * @param currentComponents\n * @returns\n */\nexport function checkTailwind(\n  type: 'all',\n  tailwindPath: string,\n  currentComponents?: NextUIComponents,\n  isPnpm?: boolean,\n  content?: string,\n  logWarning?: boolean\n): CheckResult;\nexport function checkTailwind(\n  type: 'partial',\n  tailwindPath: string,\n  currentComponents: NextUIComponents,\n  isPnpm: boolean,\n  content?: string,\n  logWarning?: boolean\n): CheckResult;\nexport function checkTailwind(\n  type: CheckType,\n  tailwindPath: string,\n  currentComponents?: NextUIComponents,\n  isPnpm?: boolean,\n  content?: string,\n  logWarning?: boolean\n): CheckResult {\n  if (type === 'partial' && !currentComponents!.length) {\n    return [true];\n  }\n\n  const result = [] as unknown as CheckResult;\n\n  const tailwindContent = content ?? readFileSync(tailwindPath, 'utf-8');\n\n  const contentMatch = getMatchArray('content', tailwindContent);\n  const pluginsMatch = getMatchArray('plugins', tailwindContent);\n\n  if (type === 'all') {\n    // Check if the required content is added Detail: https://nextui.org/docs/guide/installation#global-installation\n    const darkMatch = getMatchArray('darkMode', tailwindContent)\n    const isDarkModeCorrect = darkMatch.some((darkMode) => darkMode.includes('class'));\n    const isContentCorrect = contentMatch.some((content) =>\n      content.includes(tailwindRequired.content)\n    );\n    const isPluginsCorrect = pluginsMatch.some((plugins) =>\n      tailwindRequired.checkPluginsRegex.test(plugins)\n    );\n\n    if (isDarkModeCorrect && isContentCorrect && isPluginsCorrect) {\n      return [true];\n    }\n    !isDarkModeCorrect && result.push(tailwindRequired.darkMode);\n    !isContentCorrect && result.push(tailwindRequired.content);\n    !isPluginsCorrect && result.push(tailwindRequired.plugins);\n  } else if (type === 'partial') {\n    const individualContent = individualTailwindRequired.content(currentComponents!, isPnpm!);\n\n    let isHaveAllContent = false;\n    const isContentCorrect = contentMatch.some((content) => {\n      // Add tailwindRequired.content check to the contentMatch, cause it is all include in the individualContent\n      if (content.includes(tailwindRequired.content)) {\n        isHaveAllContent = true;\n\n        return true;\n      }\n\n      return content.includes(individualContent);\n    });\n\n    if (logWarning && isHaveAllContent) {\n      Logger.log(\n        `\\n${chalk.yellow('Attention')} Individual components from NextUI do not require the \"${chalk.bold(\n          tailwindRequired.content\n        )}\" in the tailwind config\\nFor optimized bundle sizes, consider using \"${chalk.bold(\n          individualContent\n        )}\" instead`\n      );\n    }\n\n    const isPluginsCorrect = pluginsMatch.some((plugins) =>\n      tailwindRequired.checkPluginsRegex.test(plugins)\n    );\n\n    if (isContentCorrect && isPluginsCorrect) {\n      return [true];\n    }\n    !isContentCorrect && result.push(individualContent);\n    !isPluginsCorrect && result.push(tailwindRequired.plugins);\n  }\n\n  return [false, ...result];\n}\n\nexport function checkApp(type: CheckType, appPath: string): CheckResult {\n  const result = [] as unknown as CheckResult;\n\n  if (type === 'all' || type === 'partial') {\n    const appContent = readFileSync(appPath, 'utf-8');\n\n    const importArray = getMatchImport(appContent);\n    const isAppCorrect = importArray.some(([key]) => key!.includes(appRequired.import));\n\n    if (isAppCorrect) {\n      return [true];\n    }\n\n    !isAppCorrect && result.push(appRequired.import);\n  }\n\n  return [false, ...result];\n}\n\nexport function checkPnpm(npmrcPath: string): CheckResult {\n  const result = [] as unknown as CheckResult;\n\n  let content: string;\n\n  if (npmrcPath) {\n    try {\n      content = readFileSync(npmrcPath, 'utf-8');\n      const isPnpmCorrect = content.includes(pnpmRequired.content);\n\n      if (isPnpmCorrect) {\n        return [true];\n      }\n\n      !isPnpmCorrect && result.push(pnpmRequired.content);\n    } catch (error) {\n      result.push(`Error reading .npmrc file: ${npmrcPath} \\nError: ${error}`);\n    }\n\n    return [false, ...result];\n  }\n\n  return [false, ...result];\n}\n\nexport function checkIllegalComponents(components: string[], loggerError = true) {\n  const illegalList: [string, null | string][] = [];\n\n  for (const component of components) {\n    if (!store.nextUIComponentsKeysSet.has(component)) {\n      const matchComponent = findMostMatchText(store.nextUIComponentsKeys, component);\n\n      illegalList.push([component, matchComponent]);\n    }\n  }\n\n  if (illegalList.length) {\n    const [illegalComponents, matchComponents] = illegalList.reduce(\n      (acc, [illegalComponent, matchComponent]) => {\n        return [\n          acc[0] + chalk.underline(illegalComponent) + ', ',\n          acc[1] + (matchComponent ? chalk.underline(matchComponent) + ', ' : '')\n        ];\n      },\n      ['', '']\n    );\n\n    loggerError &&\n      Logger.prefix(\n        'error',\n        `Illegal components: ${illegalComponents.replace(/, $/, '')}${\n          matchComponents\n            ? `\\n${''.padEnd(12)}It may be a typo, did you mean ${matchComponents.replace(\n                /, $/,\n                ''\n              )}?`\n            : ''\n        }`\n      );\n\n    return false;\n  }\n\n  return true;\n}\n","/**\n * Get the content of the key in the target string.\n * @example getMatchImport('import {test} from \"source\"') => [['test', 'source']]\n * @param str\n */\nexport function getMatchImport(str: string) {\n  const importRegexAll = /import {?\\s*([\\W\\w]+?)\\s*}? from [\"'](.+)[\"']/g;\n\n  const matchAll = str.match(importRegexAll) ?? [];\n  const result: string[][] = [];\n\n  for (const item of matchAll) {\n    result.push(matchImport(item));\n  }\n\n  return result.length ? result : [];\n\n  function matchImport(itemImport: string) {\n    const importRegex = /import {?\\s*([\\W\\w]+?)\\s*}? from [\"'](.+)[\"']/;\n    const match = itemImport.match(importRegex) ?? [];\n\n    return [match[1] ?? '', match[2] ?? ''];\n  }\n}\n\n/**\n * Get the array content of the key in the target string.\n * @example getMatchArray('key', 'key: [a, b, c]') => ['a', 'b', 'c']\n * @param key\n * @param target\n */\nexport function getMatchArray(key: string, target: string) {\n  const mixinReg = new RegExp(`\\\\s*${key}:\\\\s\\\\[([\\\\w\\\\W]*?)\\\\]\\\\s*`);\n\n  if (mixinReg.test(target))\n    return (\n      target\n        .match(mixinReg)?.[1]\n        ?.split(/,\\s/g)\n        .map((i) => i.trim().replace(/[\"'`]/g, ''))\n        .filter(Boolean) ?? []\n    );\n\n  return [];\n}\n\n/**\n * Replace the array content of the key in the target string.\n * @example replaceMatchArray('key', 'key: [a, b, c]', ['d', 'e', 'f']) => 'key: [d, e, f]'\n * @param key\n * @param target\n * @param value\n */\nexport function replaceMatchArray(\n  key: string,\n  target: string,\n  value: string[],\n  _replaceValue?: string\n) {\n  const mixinReg = new RegExp(`\\\\s*${key}:\\\\s\\\\[([\\\\w\\\\W]*?)\\\\]\\\\s*`);\n  const replaceValue = _replaceValue ?? value.map((v) => JSON.stringify(v)).join(', ');\n\n  if (mixinReg.test(target)) {\n    const _value = key === 'content' ? `\\n  ${key}: [${replaceValue}]` : `\\n  ${key}: [${value}]`;\n\n    return target.replace(mixinReg, _value);\n  }\n\n  // If the key does not exist, add the key and value to the end of the target\n  const targetArray = target.split('\\n');\n  const contentIndex = targetArray.findIndex((item) => item.includes('content:'));\n  const moduleIndex = targetArray.findIndex((item) => item.includes('module.exports ='));\n  const insertIndex = contentIndex !== -1 ? contentIndex - 1 : moduleIndex !== -1 ? moduleIndex : 0;\n\n  key === 'content'\n    ? targetArray.splice(insertIndex + 1, 0, `  ${key}: [${replaceValue}],`)\n    : targetArray.splice(\n        insertIndex + 1,\n        0,\n        `  ${key}: [${value.map((v) => v.replace(/[\"'`]/g, ''))}],`\n      );\n\n  return targetArray.join('\\n');\n}\n","import type {RequiredKey, SAFE_ANY} from './type';\n\nimport chalk from 'chalk';\n\nimport {NEXT_UI, THEME_UI} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {getCacheExecData} from 'src/scripts/cache/cache';\nimport {type Dependencies, compareVersions, getLatestVersion} from 'src/scripts/helpers';\n\nimport {Logger} from './logger';\nimport {colorMatchRegex, outputBox} from './output-info';\nimport {\n  fillAnsiLength,\n  getColorVersion,\n  getVersionAndMode,\n  isMajorUpdate,\n  isMinorUpdate,\n  strip,\n  transformPeerVersion,\n  versionModeRegex\n} from './utils';\n\nexport interface UpgradeOption {\n  package: string;\n  version: string;\n  latestVersion: string;\n  isLatest: boolean;\n  versionMode: string;\n  peerDependencies?: Dependencies;\n}\n\nconst DEFAULT_SPACE = ''.padEnd(7);\n\nconst MISSING = 'Missing';\n\ninterface Upgrade {\n  isNextUIAll: boolean;\n  allDependencies?: Record<string, SAFE_ANY>;\n  upgradeOptionList?: UpgradeOption[];\n  all?: boolean;\n}\n\ntype ExtractUpgrade<T extends Upgrade> = T extends {isNextUIAll: infer U}\n  ? U extends true\n    ? RequiredKey<Upgrade, 'allDependencies' | 'all'>\n    : RequiredKey<Upgrade, 'upgradeOptionList'>\n  : T;\n\nexport async function upgrade<T extends Upgrade = Upgrade>(options: ExtractUpgrade<T>) {\n  const {all, allDependencies, isNextUIAll, upgradeOptionList} = options as Required<Upgrade>;\n  let result: UpgradeOption[] = [];\n  const missingDepSet = new Set<string>();\n\n  const allOutputData = await getAllOutputData(all, isNextUIAll, allDependencies, missingDepSet);\n\n  const transformUpgradeOptionList = upgradeOptionList.map((c) => ({\n    ...c,\n    latestVersion: getColorVersion(c.version, c.latestVersion)\n  }));\n\n  const upgradePeerList = await Promise.all(\n    upgradeOptionList.map((upgradeOption) =>\n      getPackagePeerDep(\n        upgradeOption.package,\n        allDependencies,\n        missingDepSet,\n        upgradeOption.peerDependencies\n      )\n    )\n  );\n\n  const missingDepList = await getPackageUpgradeData([...missingDepSet]);\n\n  const outputList = [...transformUpgradeOptionList, ...allOutputData.allOutputList];\n  const peerDepList = [\n    ...upgradePeerList.flat(),\n    ...allOutputData.allPeerDepList,\n    ...missingDepList\n  ].filter(\n    (upgradeOption, index, arr) =>\n      index === arr.findIndex((c) => c.package === upgradeOption.package)\n  );\n\n  // Output dependencies box\n  outputDependencies(outputList, peerDepList);\n\n  result = [...outputList, ...peerDepList].filter(\n    (upgradeOption, index, arr) =>\n      !upgradeOption.isLatest && index === arr.findIndex((c) => c.package === upgradeOption.package)\n  );\n\n  // Output upgrade count\n  outputUpgradeCount(result);\n\n  return result;\n}\n\n/**\n * Get upgrade version\n * @param upgradeOptionList\n * @param peer Use for peerDependencies change the latest to fulfillment\n */\nexport function getUpgradeVersion(upgradeOptionList: UpgradeOption[], peer = false) {\n  if (!upgradeOptionList.length) {\n    return '';\n  }\n\n  const output: string[] = [];\n\n  const optionMaxLenMap = {\n    latestVersion: 0,\n    package: 0,\n    version: 0\n  };\n\n  for (const upgradeOption of upgradeOptionList) {\n    for (const key in upgradeOption) {\n      if (!Object.prototype.hasOwnProperty.call(upgradeOption, key) || !upgradeOption[key]) {\n        continue;\n      }\n\n      if (key === 'version') {\n        // Remove the duplicate character '^'\n        upgradeOption[key] = upgradeOption[key].replace(versionModeRegex, '');\n      }\n\n      const compareLength =\n        key === 'version'\n          ? upgradeOption[key].replace(colorMatchRegex, '').length\n          : upgradeOption[key].length;\n\n      optionMaxLenMap[key] = Math.max(optionMaxLenMap[key], compareLength);\n    }\n  }\n\n  for (const upgradeOption of upgradeOptionList) {\n    if (upgradeOption.isLatest) {\n      if (peer) {\n        // If it is peerDependencies, then skip output the latest version\n        continue;\n      }\n\n      output.push(\n        `  ${chalk.white(\n          `${`${upgradeOption.package}@${upgradeOption.versionMode || ''}${\n            upgradeOption.latestVersion\n          }`.padEnd(optionMaxLenMap.package + DEFAULT_SPACE.length + DEFAULT_SPACE.length)}`\n        )}${chalk.greenBright('latest').padStart(optionMaxLenMap.version)}${DEFAULT_SPACE}`\n      );\n      continue;\n    }\n    output.push(\n      `  ${chalk.white(\n        `${upgradeOption.package.padEnd(\n          optionMaxLenMap.package + DEFAULT_SPACE.length\n        )}${DEFAULT_SPACE}${fillAnsiLength(\n          `${upgradeOption.versionMode || ''}${upgradeOption.version}`,\n          optionMaxLenMap.version\n        )}  ->  ${upgradeOption.versionMode || ''}${upgradeOption.latestVersion}`\n      )}${DEFAULT_SPACE}`\n    );\n  }\n\n  return output.join('\\n');\n}\n\nexport async function getPackagePeerDep(\n  packageName: string,\n  allDependencies: Dependencies,\n  missingDepList: Set<string>,\n  peerDependencies?: Dependencies\n): Promise<UpgradeOption[]> {\n  peerDependencies =\n    peerDependencies ||\n    JSON.parse(\n      (await getCacheExecData(`npm show ${packageName} peerDependencies --json`)) as SAFE_ANY\n    ) ||\n    {};\n\n  if (!peerDependencies || !Object.keys(peerDependencies).length) {\n    return [];\n  }\n\n  const upgradeOptionList: UpgradeOption[] = [];\n\n  for (const [peerPackage, peerVersion] of Object.entries(peerDependencies)) {\n    if (upgradeOptionList.some((c) => c.package === peerPackage)) {\n      // Avoid duplicate\n      continue;\n    }\n\n    const currentVersion = allDependencies[peerPackage];\n\n    if (!currentVersion) {\n      missingDepList.add(peerPackage);\n      continue;\n    }\n\n    const {versionMode} = getVersionAndMode(allDependencies, peerPackage);\n    let formatPeerVersion = transformPeerVersion(peerVersion);\n    const isLatest = compareVersions(currentVersion, formatPeerVersion) >= 0;\n\n    if (isLatest) {\n      formatPeerVersion = transformPeerVersion(currentVersion);\n    }\n\n    upgradeOptionList.push({\n      isLatest,\n      latestVersion: isLatest\n        ? formatPeerVersion\n        : getColorVersion(currentVersion, formatPeerVersion),\n      package: peerPackage,\n      version: currentVersion,\n      versionMode\n    });\n  }\n\n  return upgradeOptionList;\n}\n\nfunction outputDependencies(outputList: UpgradeOption[], peerDepList: UpgradeOption[]) {\n  const componentName = outputList.length === 1 ? 'Component' : 'Components';\n  const outputDefault = {\n    components: {color: 'blue', text: '', title: chalk.blue(componentName)},\n    peerDependencies: {color: 'yellow', text: '', title: chalk.yellow('PeerDependencies')}\n  } as const;\n\n  const outputInfo = getUpgradeVersion(outputList);\n  const outputPeerDepInfo = getUpgradeVersion(peerDepList, true);\n\n  outputInfo.length && outputBox({...outputDefault.components, text: outputInfo});\n  Logger.newLine();\n  Logger.log(\n    chalk.gray(\n      `Required min version: ${peerDepList\n        .filter((c) => !c.isLatest)\n        .map((c) => {\n          return `${c.package}>=${c.latestVersion.replace(colorMatchRegex, '')}`;\n        })\n        .join(', ')}`\n    )\n  );\n  outputPeerDepInfo.length &&\n    outputBox({...outputDefault.peerDependencies, text: outputPeerDepInfo});\n}\n\n/**\n * Get all output data\n * @example\n * getAllOutputData(true, allDependencies, missingDepSet) --> {allOutputList: [], allPeerDepList: []}\n */\nexport async function getAllOutputData(\n  all: boolean,\n  isNextUIAll: boolean,\n  allDependencies: Record<string, SAFE_ANY>,\n  missingDepSet: Set<string>\n) {\n  if (!all || !isNextUIAll) {\n    return {\n      allOutputList: [],\n      allPeerDepList: []\n    };\n  }\n\n  const latestVersion = store.latestVersion;\n\n  const {currentVersion, versionMode} = getVersionAndMode(allDependencies, NEXT_UI);\n  const colorVersion = getColorVersion(currentVersion, latestVersion);\n  const isLatest = compareVersions(currentVersion, latestVersion) >= 0;\n\n  const nextUIPeerDepList = await getPackagePeerDep(NEXT_UI, allDependencies, missingDepSet);\n  const nextUIThemePeerDepList = await getPackagePeerDep(THEME_UI, allDependencies, missingDepSet);\n\n  const allOutputList = [\n    {\n      isLatest,\n      latestVersion: colorVersion,\n      package: NEXT_UI,\n      version: currentVersion,\n      versionMode\n    }\n  ];\n  const allPeerDepList = [...nextUIPeerDepList, ...nextUIThemePeerDepList];\n  const allOutputData = {\n    allOutputList,\n    allPeerDepList\n  };\n\n  return allOutputData;\n}\n\nexport async function getPackageUpgradeData(packageNameList: string[]) {\n  const result: UpgradeOption[] = [];\n\n  for (const packageName of packageNameList) {\n    const latestVersion = await getLatestVersion(packageName);\n\n    const allOutputList = {\n      isLatest: false,\n      latestVersion,\n      package: packageName,\n      version: chalk.red(MISSING),\n      versionMode: ''\n    };\n\n    result.push(allOutputList);\n  }\n\n  return result;\n}\n\nfunction outputUpgradeCount(outputList: UpgradeOption[]) {\n  const count = {\n    major: 0,\n    minor: 0,\n    patch: 0\n  };\n\n  for (const component of outputList) {\n    if (component.version === MISSING) {\n      count.major++;\n      continue;\n    }\n    const stripLatestVersion = strip(component.latestVersion);\n\n    if (isMajorUpdate(component.version, stripLatestVersion)) {\n      count.major++;\n    } else if (isMinorUpdate(component.version, stripLatestVersion)) {\n      count.minor++;\n    } else {\n      count.patch++;\n    }\n  }\n\n  const outputInfo = Object.entries(count)\n    .reduce((acc, [key, value]) => {\n      if (!value) {\n        return acc;\n      }\n\n      return `${acc}${chalk.yellowBright(value)} ${key}, `;\n    }, '')\n    .replace(/, $/, '');\n\n  if (outputInfo) {\n    Logger.log(outputInfo);\n    Logger.newLine();\n  }\n\n  return count;\n}\n","import type {AppendKeyValue} from './type';\n\nimport {type CommonExecOptions, execSync} from 'node:child_process';\n\nimport {Logger} from './logger';\nimport {omit} from './utils';\n\nconst execCache = new Map<string, string>();\n\n/**\n * Execute a command and return the output\n *\n * Recommend use `getCacheExecData` instead if you want to cache the output\n */\nexport async function exec(\n  cmd: string,\n  commonExecOptions?: AppendKeyValue<CommonExecOptions, 'logCmd', boolean> & {\n    cache?: boolean;\n  }\n) {\n  return new Promise((resolve, reject) => {\n    try {\n      const {cache = true, logCmd = true} = commonExecOptions || {};\n\n      if (execCache.has(cmd) && cache) {\n        resolve(execCache.get(cmd));\n      }\n\n      if (logCmd) {\n        Logger.newLine();\n        Logger.log(`${cmd}`);\n      }\n\n      const stdout = execSync(cmd, {\n        stdio: 'inherit',\n        ...(commonExecOptions ? omit(commonExecOptions, ['logCmd']) : {})\n      });\n\n      if (stdout) {\n        const output = stdout.toString();\n\n        resolve(output);\n        execCache.set(cmd, output);\n      }\n      resolve('');\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n","import { getStoreSync } from 'src/constants/store';\n\n\nimport { exec } from './exec';\nimport { Logger } from './logger';\n\nexport async function debugExecAddAction(cmd: string, components: string[] = []) {\n  if (getStoreSync('debug')) {\n    for (const component of components) {\n      Logger.warn(`Debug: ${component}`);\n    }\n  } else {\n    await exec(cmd);\n  }\n}","import type {SAFE_ANY} from './type';\n\nimport {findUp} from 'find-up';\nimport path from 'pathe';\n\nimport {ROOT} from 'src/constants/path';\n\ntype TupleToUnion<T extends readonly SAFE_ANY[]> = T[number];\n\nexport const AGENTS = ['npm', 'bun', 'pnpm', 'yarn'] as const;\n\nexport type Agent = TupleToUnion<typeof AGENTS>;\n\nexport const agents = AGENTS;\n\n// the order here matters, more specific one comes first\nexport const LOCKS: Record<string, Agent> = {\n  'bun.lockb': 'bun',\n  'npm-shrinkwrap.json': 'npm',\n  'package-lock.json': 'npm',\n  'pnpm-lock.yaml': 'pnpm',\n  'yarn.lock': 'yarn'\n};\n\nexport async function detect(cwd = ROOT) {\n  let agent: Agent | null = 'npm';\n  const lockPath = await findUp(Object.keys(LOCKS), {cwd});\n\n  // detect based on lock\n  if (lockPath) {\n    agent = LOCKS[path.basename(lockPath)]!;\n  }\n\n  return agent;\n}\n","import type {CheckType} from './check';\n\nimport {execSync} from 'node:child_process';\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport {pnpmRequired, tailwindRequired} from 'src/constants/required';\nimport {getStoreSync} from 'src/constants/store';\n\nimport {Logger} from './logger';\nimport {getMatchArray, replaceMatchArray} from './match';\n\ninterface FixTailwind {\n  errorInfoList: string[];\n  tailwindPath: string;\n  write?: boolean;\n  format?: boolean;\n}\n\ninterface FixProvider {\n  write?: boolean;\n  format?: boolean;\n}\n\nexport function fixProvider(appPath: string, options: FixProvider) {\n  const {format = false, write = true} = options;\n  let appContent = readFileSync(appPath, 'utf-8');\n\n  appContent = `import {NextUIProvider} from \"@nextui-org/react\";\\n${appContent}`;\n\n  appContent = wrapWithNextUIProvider(appContent);\n\n  write && writeFileSync(appPath, appContent, 'utf-8');\n  format && execSync(`npx prettier --write ${appPath}`, {stdio: 'ignore'});\n}\n\nfunction wrapWithNextUIProvider(content: string) {\n  const returnRegex = /return\\s*\\(([\\S\\s]*?)\\);/g;\n  const wrappedCode = content.replace(returnRegex, (_, p1) => {\n    return `return (\n      <NextUIProvider>\n        ${p1.trim()}\n      </NextUIProvider>\n    );`;\n  });\n\n  return wrappedCode;\n}\n\nexport function fixTailwind(type: CheckType, options: FixTailwind) {\n  const {errorInfoList, format = false, tailwindPath, write = true} = options;\n\n  if (!errorInfoList.length) {\n    return;\n  }\n\n  let tailwindContent = readFileSync(tailwindPath, 'utf-8');\n  let contentMatch = getMatchArray('content', tailwindContent);\n  const pluginsMatch = getMatchArray('plugins', tailwindContent);\n\n  for (const errorInfo of errorInfoList) {\n    const [errorType, info] = transformErrorInfo(errorInfo);\n\n    if (errorType === 'content') {\n      // Check if all the required content is added then skip\n      const allPublic = contentMatch.includes(tailwindRequired.content);\n\n      if (allPublic) continue;\n\n      contentMatch = contentMatch.filter((content) => !content.includes('@nextui-org/theme/dist/'));\n      contentMatch.push(info);\n      tailwindContent = replaceMatchArray(\n        'content',\n        tailwindContent,\n        contentMatch,\n        contentMatch\n          .map((v, index, arr) => {\n            // Add 4 spaces before the content\n            if (index === 0) {\n              if (arr.length === 1) {\n                return `\\n    ${JSON.stringify(v)}\\n`;\n              }\n\n              return `\\n    ${JSON.stringify(v)}`;\n            }\n            if (arr.length - 1 === index) {\n              return `    ${JSON.stringify(v)}\\n  `;\n            }\n\n            return `    ${JSON.stringify(v)}`;\n          })\n          .join(',\\n')\n      );\n    } else if (errorType === 'plugins') {\n      pluginsMatch.push(info);\n      tailwindContent = replaceMatchArray('plugins', tailwindContent, pluginsMatch);\n\n      // Add import content\n      const importContent = tailwindRequired.importContent(tailwindPath.endsWith('.ts'));\n\n      tailwindContent = `${importContent}\\n${tailwindContent}`;\n    }\n\n    if (type === 'all' && errorType === 'darkMode') {\n      // Add darkMode under the plugins content in tailwindContent\n      const darkModeIndex = tailwindContent.indexOf('plugins') - 1;\n      const darkModeContent = tailwindRequired.darkMode;\n\n      tailwindContent = `${tailwindContent.slice(\n        0,\n        darkModeIndex\n      )} ${darkModeContent},\\n${tailwindContent.slice(darkModeIndex)}`;\n    }\n  }\n\n  write && writeFileSync(tailwindPath, tailwindContent, 'utf-8');\n\n  if (format) {\n    try {\n      execSync(`npx prettier --write ${tailwindPath}`, {stdio: 'ignore'});\n    } catch (error) {\n      Logger.warn(`Prettier failed to format ${tailwindPath}`);\n    }\n  }\n}\n\nfunction transformErrorInfo(errorInfo: string): [keyof typeof tailwindRequired, string] {\n  if (tailwindRequired.darkMode.includes(errorInfo)) {\n    return ['darkMode', errorInfo];\n  } else if (tailwindRequired.plugins.includes(errorInfo)) {\n    return ['plugins', errorInfo];\n  } else {\n    return ['content', errorInfo];\n  }\n}\n\nexport function fixPnpm(\n  npmrcPath: string,\n  write = true,\n  runInstall = true,\n  logger: (({message, runInstall}) => void) | undefined = undefined\n) {\n  if (!existsSync(npmrcPath)) {\n    write && writeFileSync(npmrcPath, pnpmRequired.content, 'utf-8');\n  } else {\n    let content = readFileSync(npmrcPath, 'utf-8');\n\n    content = `${pnpmRequired.content}\\n${content}`;\n\n    write && writeFileSync(npmrcPath, content, 'utf-8');\n  }\n\n  if (!logger) {\n    Logger.newLine();\n    Logger.log(`Added the required content in file: ${npmrcPath}`);\n\n    if (runInstall && !getStoreSync('debug')) {\n      Logger.newLine();\n      Logger.log('Pnpm restructure will be run now');\n      execSync('pnpm install', {stdio: 'inherit'});\n    }\n\n    return;\n  }\n\n  // Custom logger\n  logger({message: `Added the required content in file: ${npmrcPath}`, runInstall});\n}\n","import type {CheckType} from '@helpers/check';\n\nexport const APP_REPO = 'https://codeload.github.com/nextui-org/next-app-template/tar.gz/main';\nexport const PAGES_REPO = 'https://codeload.github.com/nextui-org/next-pages-template/tar.gz/main';\nexport const VITE_REPO = 'https://codeload.github.com/nextui-org/vite-template/tar.gz/main';\n\nexport const APP_DIR = 'next-app-template-main';\nexport const PAGES_DIR = 'next-pages-template-main';\nexport const VITE_DIR = 'vite-template-main';\n\nexport const APP_NAME = 'next-app-template';\nexport const PAGES_NAME = 'next-pages-template';\nexport const VITE_NAME = 'vite-template';\nexport const DEFAULT_PROJECT_NAME = 'nextui-app';\n\nexport function tailwindTemplate(type: 'all', content?: string): string;\nexport function tailwindTemplate(type: 'partial', content: string): string;\nexport function tailwindTemplate(type: CheckType, content?: string) {\n  if (type === 'all') {\n    return `// tailwind.config.js\nconst {nextui} = require(\"@nextui-org/react\");\n\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    \"./node_modules/@nextui-org/theme/dist/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {},\n  },\n  darkMode: \"class\",\n  plugins: [nextui()],\n};`;\n  } else {\n    return `// tailwind.config.js\nconst {nextui} = require(\"@nextui-org/theme\");\n\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    ${JSON.stringify(content)},\n  ],\n  theme: {\n    extend: {},\n  },\n  darkMode: \"class\",\n  plugins: [nextui()],\n};`;\n  }\n}\n","import prompts from '@winches/prompts';\nimport chalk from 'chalk';\n\nimport {Logger} from '@helpers/logger';\n\nconst defaultPromptOptions: prompts.Options = {\n  onCancel: () => {\n    Logger.log(`${chalk.red('')} Operation cancelled`);\n    process.exit(0);\n  }\n};\n\nexport async function getText(message: string, initial?: string) {\n  const result = await prompts(\n    {\n      message,\n      name: 'value',\n      type: 'text',\n      ...(initial ? {initial} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getAutocomplete(message: string, choices?: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      message,\n      name: 'value',\n      type: 'autocomplete',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getAutocompleteMultiselect(message: string, choices?: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      hint: '- Space to select. Return to submit',\n      message,\n      min: 1,\n      name: 'value',\n      type: 'autocompleteMultiselect',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getSelect(message: string, choices: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      message,\n      name: 'value',\n      type: 'select',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n\nexport async function getMultiselect(message: string, choices?: prompts.Choice[]) {\n  const result = await prompts(\n    {\n      hint: '- Space to select. Return to submit',\n      message,\n      min: 1,\n      name: 'value',\n      type: 'multiselect',\n      ...(choices ? {choices} : {})\n    },\n    defaultPromptOptions\n  );\n\n  return result.value;\n}\n","import chalk from 'chalk';\nimport {basename} from 'pathe';\n\nimport {\n  checkApp,\n  checkPnpm,\n  checkRequiredContentInstalled,\n  checkTailwind,\n  combineProblemRecord\n} from '@helpers/check';\nimport {detect} from '@helpers/detect';\nimport {Logger, type PrefixLogType} from '@helpers/logger';\nimport {getPackageInfo} from '@helpers/package';\nimport {findFiles, strip, transformOption} from '@helpers/utils';\nimport {resolver} from 'src/constants/path';\nimport {DOCS_PNPM_SETUP, DOCS_TAILWINDCSS_SETUP, NEXT_UI} from 'src/constants/required';\n\ninterface DoctorActionOptions {\n  packagePath?: string;\n  tailwindPath?: string;\n  appPath?: string;\n  checkApp?: boolean | 'false';\n  checkTailwind?: boolean | 'false';\n  checkPnpm?: boolean | 'false';\n}\n\nexport interface ProblemRecord {\n  name: string;\n  level: Extract<PrefixLogType, 'error' | 'warn'>;\n  outputFn: () => void;\n}\n\nexport async function doctorAction(options: DoctorActionOptions) {\n  const {\n    appPath = findFiles('**/App.(j|t)sx')[0],\n    checkApp: _enableCheckApp = false,\n    checkPnpm: _enableCheckPnpm = true,\n    checkTailwind: _enableCheckTailwind = true,\n    packagePath = resolver('package.json'),\n    tailwindPath = findFiles('**/tailwind.config.(j|t)s')\n  } = options;\n  const enableCheckApp = transformOption(_enableCheckApp);\n  const enableCheckPnpm = transformOption(_enableCheckPnpm);\n  const enableCheckTailwind = transformOption(_enableCheckTailwind);\n  const tailwindPaths = [tailwindPath].flat();\n\n  const {allDependencies, allDependenciesKeys, currentComponents, isAllComponents} =\n    getPackageInfo(packagePath);\n\n  /** ======================== Output when there is no components installed ======================== */\n  if (!currentComponents.length && !isAllComponents) {\n    Logger.prefix(\n      'error',\n      ` No ${chalk.underline(\n        'NextUI components'\n      )} found in your project. Please consult the installation guide at: https://nextui.org/docs/guide/installation#global-installation`\n    );\n\n    return;\n  }\n\n  /** ======================== Problem record ======================== */\n  const problemRecord: ProblemRecord[] = [];\n\n  /** ======================== Check whether installed redundant dependencies ======================== */\n  if (isAllComponents && currentComponents.length) {\n    problemRecord.push({\n      level: 'warn',\n      name: 'redundantDependencies',\n      outputFn: () => {\n        Logger.log(\n          'You have installed some unnecessary dependencies. Consider removing them for optimal performance.'\n        );\n        Logger.newLine();\n        Logger.log('The following dependencies are redundant:');\n        currentComponents.forEach((component) => {\n          Logger.log(`- ${component.package}`);\n        });\n      }\n    });\n  }\n  // If there is no tailwind.config file\n  if (enableCheckTailwind && !tailwindPaths.length) {\n    problemRecord.push({\n      level: 'error',\n      name: 'missingTailwind',\n      outputFn: () => {\n        Logger.log(\n          'Missing tailwind.config.(j|t)s file. To set up, visit: ' +\n            chalk.underline(DOCS_TAILWINDCSS_SETUP)\n        );\n      }\n    });\n  }\n  // If there is no App.tsx\n  if (enableCheckApp && !appPath) {\n    problemRecord.push({\n      level: 'error',\n      name: 'missingApp',\n      outputFn: () => {\n        Logger.log(\n          'App.(j|t)sx file not found. Please specify the path using: doctor --appPath=[yourAppPath]'\n        );\n      }\n    });\n  }\n\n  /** ======================== Check if the allComponents required dependencies installed ======================== */\n  if (isAllComponents) {\n    // Check if framer-motion allComponents is installed\n    let [isCorrectInstalled, ...missingDependencies] = await checkRequiredContentInstalled(\n      'all',\n      allDependenciesKeys,\n      {allDependencies, packageNames: [NEXT_UI], peerDependencies: true}\n    );\n\n    // Check if other allComponents are installed\n    if (currentComponents.length) {\n      const [_isCorrectInstalled, ..._missingDependencies] = await checkRequiredContentInstalled(\n        'partial',\n        allDependenciesKeys,\n        {\n          allDependencies,\n          packageNames: currentComponents.map((c) => c.package),\n          peerDependencies: true\n        }\n      );\n\n      isCorrectInstalled = _isCorrectInstalled || isCorrectInstalled;\n      // Combine missing dependencies\n      missingDependencies = [..._missingDependencies, ...missingDependencies].filter(\n        (c, index, arr) => {\n          c = strip(c).replace(/@[\\d.]+/g, '');\n\n          return arr.findIndex((d) => strip(d).replace(/@[\\d.]+/g, '') === c) === index;\n        }\n      );\n    }\n\n    if (!isCorrectInstalled) {\n      problemRecord.push(combineProblemRecord('missingDependencies', {missingDependencies}));\n    }\n\n    // Check whether tailwind.config file is correct\n    if (enableCheckTailwind) {\n      for (const tailwindPath of tailwindPaths) {\n        const [isCorrectTailwind, ...errorInfo] = checkTailwind('all', tailwindPath);\n\n        if (!isCorrectTailwind) {\n          const tailwindName = basename(tailwindPath);\n\n          problemRecord.push(combineProblemRecord('incorrectTailwind', {errorInfo, tailwindName}));\n        }\n      }\n    }\n\n    // Check whether the App.tsx is correct\n    if (enableCheckApp && appPath) {\n      const [isAppCorrect, ...errorInfo] = checkApp('all', appPath);\n\n      if (!isAppCorrect) {\n        problemRecord.push(combineProblemRecord('incorrectApp', {errorInfo}));\n      }\n    }\n  } else if (currentComponents.length) {\n    // Individual components check\n    const [isCorrectInstalled, ...missingDependencies] = await checkRequiredContentInstalled(\n      'partial',\n      allDependenciesKeys,\n      {\n        allDependencies,\n        packageNames: currentComponents.map((c) => c.package),\n        peerDependencies: true\n      }\n    );\n\n    if (!isCorrectInstalled) {\n      problemRecord.push(combineProblemRecord('missingDependencies', {missingDependencies}));\n    }\n\n    // Check whether tailwind.config file is correct\n    if (enableCheckTailwind) {\n      const isPnpm = (await detect()) === 'pnpm';\n\n      for (const tailwindPath of tailwindPaths) {\n        const [isCorrectTailwind, ...errorInfo] = checkTailwind(\n          'partial',\n          tailwindPath,\n          currentComponents,\n          isPnpm,\n          undefined,\n          true\n        );\n\n        if (!isCorrectTailwind) {\n          const tailwindName = basename(tailwindPath);\n\n          problemRecord.push(combineProblemRecord('incorrectTailwind', {errorInfo, tailwindName}));\n        }\n      }\n    }\n\n    // Check whether the App.tsx is correct\n    if (enableCheckApp && appPath) {\n      const [isAppCorrect, ...errorInfo] = checkApp('partial', appPath);\n\n      if (!isAppCorrect) {\n        problemRecord.push(combineProblemRecord('incorrectApp', {errorInfo}));\n      }\n    }\n  }\n\n  /** ======================== Check whether Pnpm setup is correct ======================== */\n  if (enableCheckPnpm) {\n    const currentPkgManager = await detect();\n\n    if (currentPkgManager === 'pnpm') {\n      const npmrcPath = resolver('.npmrc');\n\n      const [isCorrect, ...errorInfo] = checkPnpm(npmrcPath);\n\n      if (!isCorrect) {\n        problemRecord.push({\n          level: 'error',\n          name: 'incorrectPnpm',\n          outputFn: () => {\n            Logger.log(\n              'The pnpm setup is incorrect \\nPlease update your configuration according to the guidelines provided at: ' +\n                chalk.underline(DOCS_PNPM_SETUP)\n            );\n            Logger.newLine();\n            Logger.log('Required changes:');\n            errorInfo.forEach((info) => {\n              Logger.log(`- Add ${info}`);\n            });\n          }\n        });\n      }\n    }\n  }\n\n  /** ======================== Return when there is no problem ======================== */\n  if (!problemRecord.length) {\n    Logger.newLine();\n    Logger.success(' Your project has no detected issues.');\n\n    return;\n  }\n\n  /** ======================== Output the problem record ======================== */\n  Logger.prefix(\n    'error',\n    ` Your project has ${chalk.underline(problemRecord.length)} issue${\n      problemRecord.length === 1 ? '' : 's'\n    } that require attention`\n  );\n  Logger.newLine();\n\n  for (let index = 0; index < problemRecord.length; index++) {\n    const problem = problemRecord[index] as ProblemRecord;\n\n    Logger[problem.level](`Issue ${index + 1}: ${chalk.bold(problem.name)}`);\n    Logger.newLine();\n    problem.outputFn();\n    Logger.newLine();\n  }\n\n  process.exit(0);\n}\n","import {outputComponents, outputInfo} from '@helpers/output-info';\nimport {getPackageInfo} from '@helpers/package';\nimport {resolver} from 'src/constants/path';\n\ninterface EnvActionOptions {\n  packagePath?: string;\n}\n\nexport async function envAction(options: EnvActionOptions) {\n  const {packagePath = resolver('package.json')} = options;\n\n  const {currentComponents} = getPackageInfo(packagePath);\n\n  /** ======================== Output the current components ======================== */\n  outputComponents({components: currentComponents});\n\n  /** ======================== Output the system environment info ======================== */\n  outputInfo();\n\n  process.exit(0);\n}\n","import type {Agent} from '@helpers/detect';\nimport type {GetUnionLastValue} from '@helpers/type';\n\nimport {existsSync, renameSync} from 'node:fs';\n\nimport * as p from '@clack/prompts';\nimport chalk from 'chalk';\nimport {join} from 'pathe';\n\nimport {downloadTemplate} from '@helpers/fetch';\nimport {fixPnpm} from '@helpers/fix';\nimport {checkInitOptions} from '@helpers/init';\nimport {getPackageManagerInfo} from '@helpers/utils';\nimport {selectClack, taskClack, textClack} from 'src/prompts/clack';\nimport {resolver} from 'src/scripts/path';\n\nimport {ROOT} from '../../src/constants/path';\nimport {\n  APP_DIR,\n  APP_NAME,\n  APP_REPO,\n  PAGES_DIR,\n  PAGES_NAME,\n  PAGES_REPO,\n  VITE_DIR,\n  VITE_NAME,\n  VITE_REPO\n} from '../../src/constants/templates';\n\nexport interface InitActionOptions {\n  template?: 'app' | 'pages' | 'vite';\n  package?: Agent;\n}\n\nexport const templatesMap: Record<Required<InitActionOptions>['template'], string> = {\n  app: APP_NAME,\n  pages: PAGES_NAME,\n  vite: VITE_NAME\n};\n\nexport async function initAction(_projectName: string, options: InitActionOptions) {\n  const {package: _package = 'npm', template: _template} = options;\n\n  /** ======================== Check invalid options ======================== */\n  checkInitOptions(_template, _package);\n\n  /** ======================== Welcome title ======================== */\n  p.intro(chalk.cyanBright('Create a new project'));\n\n  /** ======================== Get the init info ======================== */\n  const {packageName, projectName, template} = await getTableInfo(\n    _package,\n    _projectName,\n    _template\n  );\n  const {run} = getPackageManagerInfo(packageName);\n\n  /** ======================== Generate template ======================== */\n  // Detect if the project name already exists\n  if (existsSync(resolver(`${ROOT}/${projectName}`))) {\n    p.cancel(`The project name ${chalk.redBright(projectName)} already exists`);\n    process.exit(1);\n  }\n\n  if (template === 'app') {\n    await generateTemplate(APP_REPO);\n    renameTemplate(APP_DIR, projectName);\n  } else if (template === 'pages') {\n    await generateTemplate(PAGES_REPO);\n    renameTemplate(PAGES_DIR, projectName);\n  } else if (template === 'vite') {\n    await generateTemplate(VITE_REPO);\n    renameTemplate(VITE_DIR, projectName);\n  }\n\n  /** ======================== Pnpm setup (optional) ======================== */\n  if (packageName === 'pnpm') {\n    const npmrcFile = resolver(`${ROOT}/${projectName}/.npmrc`);\n\n    fixPnpm(npmrcFile, true, false, ({message}) => {\n      p.log.message(message);\n    });\n  }\n\n  /** ======================== Add guide ======================== */\n  p.note(\n    `cd ${chalk.cyanBright(projectName)}\\n${chalk.cyanBright(packageName)} install`,\n    'Next steps'\n  );\n\n  p.outro(` Get started with ${chalk.cyanBright(`${packageName} ${run} dev`)}`);\n\n  process.exit(0);\n}\n\n/** ======================== Helper function ======================== */\nasync function generateTemplate(url: string) {\n  await taskClack({\n    failText: 'Template creation failed',\n    successText: 'Template created successfully!',\n    task: downloadTemplate(ROOT, url),\n    text: 'Creating template...'\n  });\n}\n\nfunction renameTemplate(originName: string, projectName: string) {\n  try {\n    renameSync(join(ROOT, originName), join(ROOT, projectName));\n  } catch (error) {\n    if (error) {\n      p.cancel(`rename Error: ${error}`);\n    }\n  }\n}\n\nexport type GenerateOptions<T, Last = GetUnionLastValue<T>> = [T] extends [never]\n  ? []\n  : [\n      ...GenerateOptions<Exclude<T, Last>>,\n      {\n        label: string;\n        value: Last;\n        hint: string;\n      }\n    ];\n\nasync function getTableInfo(packageName?: string, projectName?: string, template?: string) {\n  const options: GenerateOptions<Exclude<InitActionOptions['template'], undefined>> = [\n    {\n      hint: 'A Next.js 14 with app directory template pre-configured with NextUI (v2) and Tailwind CSS.',\n      label: chalk.gray('App'),\n      value: 'app'\n    },\n    {\n      hint: 'A Next.js 14 with pages directory template pre-configured with NextUI (v2) and Tailwind CSS.',\n      label: chalk.gray('Pages'),\n      value: 'pages'\n    },\n    {\n      hint: 'A Vite template pre-configured with NextUI (v2) and Tailwind CSS.',\n      label: chalk.gray('Vite'),\n      value: 'vite'\n    }\n  ];\n\n  template = (await selectClack({\n    initialValue: template,\n    message: 'Select a template (Enter to select)',\n    options\n  })) as string;\n\n  projectName = (await textClack({\n    initialValue: projectName ?? templatesMap[template],\n    message: 'New project name (Enter to skip with default name)',\n    placeholder: projectName ?? templatesMap[template]\n  })) as string;\n\n  packageName = (await selectClack({\n    initialValue: packageName,\n    message: 'Select a package manager (Enter to select)',\n    options: [\n      {\n        label: chalk.gray('npm'),\n        value: 'npm'\n      },\n      {\n        label: chalk.gray('yarn'),\n        value: 'yarn'\n      },\n      {\n        label: chalk.gray('pnpm'),\n        value: 'pnpm'\n      },\n      {\n        label: chalk.gray('bun'),\n        value: 'bun'\n      }\n    ]\n  })) as Agent;\n\n  return {\n    packageName: packageName as Agent,\n    projectName,\n    template\n  };\n}\n","import {Readable} from 'node:stream';\nimport {pipeline} from 'node:stream/promises';\n\nimport retry from 'async-retry';\nimport tar from 'tar';\n\n/**\n * Fetch the tar stream from the specified URL.\n * @param url\n */\nasync function fetchTarStream(url: string) {\n  const res = await fetch(url);\n\n  if (!res.body) {\n    throw new Error(`Failed to download: ${url}`);\n  }\n\n  return Readable.fromWeb(res.body);\n}\n\n/**\n * Download the template from the specified URL and extract it to the specified directory.\n * @param root\n * @param url\n */\nexport async function downloadTemplate(root: string, url: string) {\n  await retry(\n    async (bail) => {\n      try {\n        await pipeline(\n          await fetchTarStream(url),\n          tar.x({\n            cwd: root\n          })\n        );\n      } catch (error) {\n        bail(new Error(`Failed to download ${url} Error: ${error}`));\n      }\n    },\n    {\n      retries: 3\n    }\n  );\n}\n","import type {SAFE_ANY} from './type';\n\nimport {type InitActionOptions, templatesMap} from 'src/actions/init-action';\n\nimport {AGENTS, type Agent} from './detect';\nimport {printMostMatchText} from './math-diff';\n\nexport function checkInitOptions(template: InitActionOptions['template'], agent: Agent) {\n  if (template) {\n    if (!Object.keys(templatesMap).includes(template)) {\n      printMostMatchText(Object.keys(templatesMap), template)\n    }\n  }\n  if (agent) {\n    if (!AGENTS.includes(agent)) {\n      printMostMatchText(AGENTS as SAFE_ANY, agent)\n    }\n  }\n}","import type {SAFE_ANY} from '@helpers/type';\n\nimport {spinner as _spinner, cancel, isCancel, select, text} from '@clack/prompts';\nimport chalk from 'chalk';\n\nexport const cancelClack = (value: SAFE_ANY) => {\n  if (isCancel(value)) {\n    cancel(`${chalk.red('')} Operation cancelled`);\n    process.exit(0);\n  }\n};\n\nexport const textClack: typeof text = async (opts) => {\n  const result = (await text(opts)) as string;\n\n  cancelClack(result);\n\n  return result;\n};\n\nexport const selectClack: typeof select = async (opts) => {\n  const result = await select(opts);\n\n  cancelClack(result);\n\n  return result;\n};\n\nexport const spinner = _spinner();\n\nexport interface TaskClackOptions<T> {\n  text: string;\n  task: PromiseLike<T>;\n  successText?: string;\n  failText?: string;\n}\n\nexport const taskClack = async <T>(opts: TaskClackOptions<T>) => {\n  const {failText, successText, task, text} = opts;\n\n  let result: string | null = null;\n\n  try {\n    spinner.start(text);\n    result = await (task as SAFE_ANY);\n    spinner.stop(successText);\n  } catch (error) {\n    cancel(failText ?? result ?? 'Task failed');\n  }\n\n  return result;\n};\n","import {Logger} from '@helpers/logger';\nimport {outputComponents} from '@helpers/output-info';\nimport {getPackageInfo} from '@helpers/package';\nimport {store} from 'src/constants/store';\n\nimport {type NextUIComponents} from '../../src/constants/component';\nimport {resolver} from '../../src/constants/path';\n\ninterface ListActionOptions {\n  remote?: boolean;\n  packagePath?: string;\n}\n\nexport async function listAction(options: ListActionOptions) {\n  const {packagePath = resolver('package.json'), remote = false} = options;\n\n  let components = store.nextUIComponents as NextUIComponents;\n\n  try {\n    /** ======================== Get the installed components ======================== */\n    if (!remote) {\n      const {currentComponents} = await getPackageInfo(packagePath);\n\n      components = currentComponents;\n    }\n\n    if (!components.length) {\n      Logger.warn(`No NextUI components detected in the specified package.json at: ${packagePath}`);\n\n      return;\n    }\n\n    /** ======================== Output the components ======================== */\n    remote ? outputComponents({commandName: 'list', components}) : outputComponents({components});\n  } catch (error) {\n    Logger.prefix('error', `An error occurred while attempting to list the components: ${error}`);\n  }\n\n  process.exit(0);\n}\n","/* eslint-disable no-var */\nimport type {SAFE_ANY} from '@helpers/type';\n\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport chalk from 'chalk';\n\nimport {checkIllegalComponents} from '@helpers/check';\nimport {detect} from '@helpers/detect';\nimport {Logger} from '@helpers/logger';\nimport {outputComponents} from '@helpers/output-info';\nimport {\n  getPackageInfo,\n  transformComponentsToPackage,\n  transformPackageDetail\n} from '@helpers/package';\nimport {removeDependencies, removeTailwind} from '@helpers/remove';\nimport {findFiles} from '@helpers/utils';\nimport {resolver} from 'src/constants/path';\nimport {\n  DOCS_PROVIDER_SETUP,\n  NEXT_UI,\n  SYSTEM_UI,\n  THEME_UI,\n  pnpmRequired\n} from 'src/constants/required';\nimport {getAutocompleteMultiselect, getSelect} from 'src/prompts';\n\ninterface RemoveOptionsAction {\n  packagePath: string;\n  all?: boolean;\n  tailwindPath?: string;\n  prettier?: boolean;\n}\n\nexport async function removeAction(components: string[], options: RemoveOptionsAction) {\n  const {\n    all = false,\n    packagePath = resolver('package.json'),\n    tailwindPath = findFiles('**/tailwind.config.(j|t)s')[0]\n  } = options;\n\n  var {allDependencies, allDependenciesKeys, currentComponents} = getPackageInfo(packagePath);\n  const packageManager = await detect();\n  const prettier = options.prettier ?? allDependenciesKeys.has('prettier');\n\n  let isNextUIAll = !!allDependencies[NEXT_UI];\n\n  // If no Installed NextUI components then exit\n  if (!currentComponents.length && !isNextUIAll) {\n    Logger.prefix('error', `No NextUI components detected in your package.json at: ${packagePath}`);\n\n    return;\n  }\n\n  if (all || isNextUIAll) {\n    components = isNextUIAll ? [NEXT_UI] : currentComponents.map((component) => component.package);\n  } else if (!components.length) {\n    components = await getAutocompleteMultiselect(\n      'Select the components to remove',\n      currentComponents.map((component) => {\n        return {\n          title: component.package,\n          value: component.package\n        };\n      })\n    );\n  } else {\n    // Check if the custom input components are valid\n    if (!checkIllegalComponents(components)) {\n      return;\n    }\n\n    // Transform components to package\n    components = transformComponentsToPackage(components);\n  }\n\n  // Ask user whether need to remove these components\n  const filteredComponents = components.includes(NEXT_UI)\n    ? await transformPackageDetail(components, allDependencies)\n    : currentComponents.filter((component) =>\n        components.some((c) => c.includes(component.package) || c.includes(component.name))\n      );\n\n  outputComponents({\n    components: filteredComponents,\n    message: chalk.yellowBright(' Components slated for removal:')\n  });\n\n  const isRemove = await getSelect('Confirm removal of these components:', [\n    {title: 'Yes', value: true},\n    {title: 'No', value: false}\n  ]);\n\n  if (!isRemove) {\n    // Exit the process\n    process.exit(0);\n  }\n\n  /** ======================== Step 1 Remove dependencies ======================== */\n  const removeDepList: string[] = [...components];\n  const filterComponents = currentComponents.filter((c) => !components.includes(c.package));\n\n  if (!filterComponents.length) {\n    // Remove the selected components if not components leave then remove the theme-ui and system-ui\n    allDependencies[THEME_UI] && removeDepList.push(THEME_UI);\n    allDependencies[SYSTEM_UI] && removeDepList.push(SYSTEM_UI);\n  }\n\n  await removeDependencies(removeDepList, packageManager);\n\n  /** ======================== Step 2 Remove the content ======================== */\n  // Get the new package information\n  var {allDependencies, currentComponents} = getPackageInfo(packagePath, false);\n\n  isNextUIAll = !!allDependencies[NEXT_UI];\n\n  const type: SAFE_ANY = isNextUIAll ? 'all' : 'partial';\n\n  removeTailwind(type, {\n    currentComponents,\n    isNextUIAll,\n    isPnpm: packageManager === 'pnpm',\n    prettier,\n    tailwindPath: tailwindPath!\n  });\n\n  /** ======================== Step 3 Remove the pnpm ======================== */\n  if (!currentComponents.length && !isNextUIAll) {\n    if (packageManager === 'pnpm') {\n      const npmrcPath = resolver('.npmrc');\n\n      if (existsSync(npmrcPath)) {\n        let content = readFileSync(npmrcPath, 'utf-8');\n\n        content = content.replace(pnpmRequired.content, '');\n\n        Logger.newLine();\n        Logger.info('Removing specified .npmrc file content');\n\n        writeFileSync(npmrcPath, content, 'utf-8');\n      }\n    }\n\n    Logger.newLine();\n    Logger.warn(\n      `No NextUI components remain installed. Ensure the NextUIProvider is also removed if necessary.\\nFor more information, visit: ${DOCS_PROVIDER_SETUP}`\n    );\n  }\n\n  Logger.newLine();\n\n  Logger.success(\n    ` Successfully removed the specified NextUI components: ${components\n      .map((c) => chalk.underline(c))\n      .join(', ')}`\n  );\n\n  process.exit(0);\n}\n","import type {Agent} from './detect';\nimport type {NextUIComponents} from 'src/constants/component';\n\nimport {existsSync, readFileSync, writeFileSync} from 'node:fs';\n\nimport {tailwindRequired} from 'src/constants/required';\n\nimport {type CheckType, checkTailwind} from './check';\nimport {exec} from './exec';\nimport {fixTailwind} from './fix';\nimport {Logger} from './logger';\nimport {getMatchArray, replaceMatchArray} from './match';\nimport {getPackageManagerInfo} from './utils';\n\nexport async function removeDependencies(components: string[], packageManager: Agent) {\n  const {remove} = getPackageManagerInfo(packageManager);\n\n  await exec(`${packageManager} ${remove} ${components.join(' ')}`);\n\n  return;\n}\n\nexport async function removeTailwind(\n  type: CheckType,\n  options: {\n    tailwindPath?: string;\n    currentComponents: NextUIComponents;\n    isPnpm: boolean;\n    prettier: boolean;\n    isNextUIAll: boolean;\n  }\n) {\n  const {currentComponents, isNextUIAll, isPnpm, prettier, tailwindPath} = options;\n\n  if (tailwindPath && !existsSync(tailwindPath)) {\n    Logger.prefix('warn', `No tailwind.config.(j|t)s found remove action skipped`);\n\n    return;\n  }\n\n  let tailwindContent = readFileSync(tailwindPath!, 'utf-8');\n  const contentMatch = getMatchArray('content', tailwindContent);\n  const pluginsMatch = getMatchArray('plugins', tailwindContent);\n\n  const insIncludeAll = contentMatch.some((c) => c.includes(tailwindRequired.content));\n\n  // Not installed NextUI components then remove the tailwind content about nextui\n  if (!currentComponents.length && !isNextUIAll) {\n    const index = pluginsMatch.findIndex((c) => c.includes('nextui'));\n\n    index !== -1 && pluginsMatch.splice(index, 1);\n    tailwindContent = replaceMatchArray('plugins', tailwindContent, pluginsMatch);\n\n    // Remove the import nextui content\n    tailwindContent = tailwindContent.replace(/(const|var|let|import)[\\W\\w]+?nextui.*?;\\n/, '');\n  }\n\n  // If there are already have all nextui content include then don't need to remove the content\n  if (!insIncludeAll) {\n    // Remove the nextui content\n    while (contentMatch.some((c) => c.includes('nextui'))) {\n      contentMatch.splice(\n        contentMatch.findIndex((c) => c.includes('nextui')),\n        1\n      );\n    }\n    tailwindContent = replaceMatchArray('content', tailwindContent, contentMatch);\n  }\n  //  if (!currentComponents.length && isNextUIAll) {\n  //   const index = contentMatch.findIndex(c => c.includes('nextui'));\n\n  //   // Remove the nextui content\n  //   index !== -1 &&\n  //     contentMatch.splice(\n  //       contentMatch.indexOf('./node_modules/@nextui-org/theme/dist/components'),\n  //       1\n  //     );\n  //   tailwindContent = replaceMatchArray('content', tailwindContent, contentMatch);\n  // } else if (!isNextUIAll && currentComponents.length) {\n  //   const index = contentMatch.indexOf(tailwindRequired.content);\n\n  //   // Remove the nextui content\n  //   index !== -1 && contentMatch.splice(index, 1);\n  //   tailwindContent = replaceMatchArray('content', tailwindContent, contentMatch);\n  // }\n  // Write the tailwind content\n  writeFileSync(tailwindPath!, tailwindContent, 'utf-8');\n\n  const [, ...errorInfoList] = checkTailwind(\n    type as 'partial',\n    tailwindPath!,\n    currentComponents,\n    isPnpm,\n    undefined,\n    true\n  );\n\n  fixTailwind(type, {errorInfoList, format: prettier, tailwindPath: tailwindPath!});\n\n  Logger.newLine();\n  Logger.info(`Remove the removed components tailwind content in file: ${tailwindPath}`);\n}\n","import type {AppendKeyValue} from '@helpers/type';\n\nimport fs from 'node:fs';\n\nimport {checkIllegalComponents} from '@helpers/check';\nimport {detect} from '@helpers/detect';\nimport {exec} from '@helpers/exec';\nimport {Logger} from '@helpers/logger';\nimport {colorMatchRegex} from '@helpers/output-info';\nimport {getPackageInfo} from '@helpers/package';\nimport {setupPnpm} from '@helpers/setup';\nimport {upgrade} from '@helpers/upgrade';\nimport {getColorVersion, getPackageManagerInfo, transformPeerVersion} from '@helpers/utils';\nimport {type NextUIComponents} from 'src/constants/component';\nimport {resolver} from 'src/constants/path';\nimport {NEXT_UI} from 'src/constants/required';\nimport {store} from 'src/constants/store';\nimport {getAutocompleteMultiselect, getMultiselect, getSelect} from 'src/prompts';\nimport {compareVersions, getLatestVersion} from 'src/scripts/helpers';\n\ninterface UpgradeActionOptions {\n  packagePath?: string;\n  all?: boolean;\n  major?: boolean;\n  minor?: boolean;\n  patch?: boolean;\n  write?: boolean;\n}\n\ntype TransformComponent = Required<\n  AppendKeyValue<NextUIComponents[0], 'latestVersion', string> & {isLatest: boolean}\n>;\n\nexport async function upgradeAction(components: string[], options: UpgradeActionOptions) {\n  const {all = false, packagePath = resolver('package.json'), write = false} = options;\n  const {allDependencies, currentComponents} = getPackageInfo(packagePath, false);\n\n  const isNextUIAll = !!allDependencies[NEXT_UI];\n\n  const transformComponents: TransformComponent[] = [];\n\n  for (const component of currentComponents) {\n    const latestVersion =\n      store.nextUIComponentsMap[component.name]?.version ||\n      (await getLatestVersion(component.package));\n\n    transformComponents.push({\n      ...component,\n      isLatest: compareVersions(component.version, latestVersion) >= 0,\n      latestVersion\n    });\n  }\n\n  // If no Installed NextUI components then exit\n  if (!transformComponents.length && !isNextUIAll) {\n    Logger.prefix('error', `No NextUI components detected in your package.json at: ${packagePath}`);\n\n    return;\n  }\n\n  if (all) {\n    components = currentComponents.map((component) => component.package);\n  } else if (!components.length) {\n    // If have the main nextui then add\n    if (isNextUIAll) {\n      const nextuiData = {\n        isLatest:\n          compareVersions(store.latestVersion, transformPeerVersion(allDependencies[NEXT_UI])) <= 0,\n        latestVersion: store.latestVersion,\n        package: NEXT_UI,\n        version: transformPeerVersion(allDependencies[NEXT_UI])\n      } as TransformComponent;\n\n      transformComponents.push(nextuiData);\n    }\n\n    // If all package is latest then pass\n    if (transformComponents.every((component) => component.isLatest)) {\n      Logger.success(' All NextUI packages are up to date');\n      process.exit(0);\n    }\n\n    components = await getAutocompleteMultiselect(\n      'Select the components to upgrade',\n      transformComponents.map((component) => {\n        const isUpToDate = compareVersions(component.version, component.latestVersion) >= 0;\n\n        return {\n          disabled: isUpToDate,\n          disabledMessage: 'Already up to date',\n          title: `${component.package}${\n            isUpToDate\n              ? ''\n              : `@${component.version} -> ${getColorVersion(\n                  component.version,\n                  component.latestVersion\n                )}`\n          }`,\n          value: component.package\n        };\n      })\n    );\n  } else {\n    // Check if the components are valid\n    if (!checkIllegalComponents(components)) {\n      return;\n    }\n  }\n\n  components = components.map((c) => {\n    if (store.nextUIComponentsMap[c]?.package) {\n      return store.nextUIComponentsMap[c]!.package;\n    }\n\n    return c;\n  });\n\n  /** ======================== Upgrade ======================== */\n  const upgradeOptionList = transformComponents.filter((c) => components.includes(c.package));\n\n  let result = await upgrade({\n    all,\n    allDependencies,\n    isNextUIAll,\n    upgradeOptionList\n  });\n  let ignoreList: string[] = [];\n  const packageManager = await detect();\n\n  if (result.length) {\n    const isExecute = await getSelect('Would you like to proceed with the upgrade?', [\n      {\n        title: 'Yes',\n        value: true\n      },\n      {\n        description: 'Select this if you wish to exclude certain packages from the upgrade',\n        title: 'No',\n        value: false\n      }\n    ]);\n\n    const {install} = getPackageManagerInfo(packageManager);\n\n    if (!isExecute) {\n      // Ask whether need to remove some package not to upgrade\n      const isNeedRemove = await getSelect(\n        'Would you like to exclude any packages from the upgrade?',\n        [\n          {\n            description: 'Select this to choose packages to exclude',\n            title: 'Yes',\n            value: true\n          },\n          {\n            description: 'Select this to proceed without excluding any packages',\n            title: 'No',\n            value: false\n          }\n        ]\n      );\n\n      if (isNeedRemove) {\n        ignoreList = await getMultiselect(\n          'Select the packages you want to exclude from the upgrade:',\n          result.map((c) => {\n            return {\n              description: `${c.version} -> ${getColorVersion(c.version, c.latestVersion)}`,\n              title: c.package,\n              value: c.package\n            };\n          })\n        );\n      }\n    }\n\n    // Remove the components that need to be ignored\n    result = result.filter((r) => {\n      return !ignoreList.some((ignore) => r.package === ignore);\n    });\n\n    if (write) {\n      // Write the upgrade versions to the package file\n      const packageJson = JSON.parse(fs.readFileSync(packagePath, 'utf8'));\n\n      result.forEach((component) => {\n        packageJson.dependencies[component.package] = component.latestVersion.replace(\n          colorMatchRegex,\n          ''\n        );\n      });\n\n      fs.writeFileSync(packagePath, JSON.stringify(packageJson, null, 2));\n\n      Logger.newLine();\n      Logger.success(' Upgrade versions written to package.json');\n      process.exit(0);\n    } else {\n      await exec(\n        `${packageManager} ${install} ${result.reduce((acc, component, index) => {\n          return `${acc}${index === 0 ? '' : ' '}${\n            component.package\n          }@${component.latestVersion.replace(colorMatchRegex, '')}`;\n        }, '')}`\n      );\n    }\n  }\n\n  /** ======================== Setup Pnpm ======================== */\n  setupPnpm(packageManager);\n\n  Logger.newLine();\n  Logger.success(' Upgrade complete. All components are up to date.');\n\n  process.exit(0);\n}\n","\nimport type {Agent} from './detect';\n\nimport {existsSync, writeFileSync } from 'node:fs';\n\nimport {resolver} from 'src/constants/path';\nimport {pnpmRequired} from 'src/constants/required';\n\nimport {checkPnpm} from './check';\nimport {fixPnpm} from './fix';\n\nexport async function setupPnpm(packageManager: Agent) {\n  if (packageManager === 'pnpm') {\n    const npmrcPath = resolver('.npmrc');\n\n    if (!existsSync(npmrcPath)) {\n      writeFileSync(resolver('.npmrc'), pnpmRequired.content, 'utf-8');\n    } else {\n      const [isCorrectPnpm] = checkPnpm(npmrcPath);\n\n      if (!isCorrectPnpm) {\n        fixPnpm(npmrcPath);\n      }\n    }\n  }\n}"]}